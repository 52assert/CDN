(window["webpackJsonp_cloud-ebl-app"]=window["webpackJsonp_cloud-ebl-app"]||[]).push([["views-delivery-RecordDtlPage-vue"],{"5f45":function(e,t,r){},"71e8":function(e,t,r){"use strict";r("5f45")},"74d2":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r("b32d"),o="http://cloud.dowaycn.com/Gateway/BaseService/api/v1/customer";function c(e){return Object(n["a"])({url:o+"/loadByName",method:"get",params:e})}function i(e){return Object(n["a"])({url:o+"/queryAllContacts",method:"get",params:e})}function a(){return Object(n["a"])({url:o+"/query",method:"get"})}},"7c49":function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),o=Object(n["withScopeId"])("data-v-6b1f2de2");Object(n["pushScopeId"])("data-v-6b1f2de2");var c={class:"header"},i=Object(n["createTextVNode"])("发送"),a=Object(n["createTextVNode"])("确认"),s=Object(n["createTextVNode"])("驳回"),l=Object(n["createTextVNode"])("保存为草稿"),d={style:{float:"right","text-align":"center"}},u=Object(n["createVNode"])("a",{href:"http://cloud.dowaycn.com/Gateway/EblService/api/v1/delivery/deliveryDown"},"下载模板",-1),v=Object(n["createTextVNode"])("上传文件"),b={class:"info"},h={class:"box"},y=Object(n["createVNode"])("span",{class:"title"},"基本信息",-1),p=Object(n["createVNode"])("hr",{style:{border:"0",background:"#dadada",height:"1px"}},null,-1),f=Object(n["createVNode"])("br",null,null,-1),j=Object(n["createVNode"])("br",null,null,-1),O=Object(n["createVNode"])("br",null,null,-1),m=Object(n["createVNode"])("br",null,null,-1),w={class:"box"},g=Object(n["createVNode"])("span",{class:"title"},"送货信息",-1),S=Object(n["createTextVNode"])(" 添加明细 "),D=Object(n["createVNode"])("hr",{style:{border:"0",background:"#dadada",height:"1px"}},null,-1);Object(n["popScopeId"])();var V=o((function(e,t,r,V,N,C){var k=Object(n["resolveComponent"])("a-button"),T=Object(n["resolveComponent"])("a-upload"),x=Object(n["resolveComponent"])("a-input"),_=Object(n["resolveComponent"])("a-form-item"),I=Object(n["resolveComponent"])("a-date-picker"),q=Object(n["resolveComponent"])("a-select-option"),R=Object(n["resolveComponent"])("a-select"),B=Object(n["resolveComponent"])("a-form"),L=Object(n["resolveComponent"])("BaseTableEditable"),F=Object(n["resolveComponent"])("a-textarea"),U=Object(n["resolveComponent"])("a-modal");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",c,[Object(n["withDirectives"])(Object(n["createVNode"])(k,{style:{background:"#5259e5",color:"#fff",margin:"0px 10px"},onClick:e.send},{default:o((function(){return[i]})),_:1},8,["onClick"]),[[n["vShow"],"send"===e.type||void 0===e.id]]),Object(n["withDirectives"])(Object(n["createVNode"])(k,{style:{background:"#5259e5",color:"#fff",margin:"0px 10px"},onClick:t[1]||(t[1]=function(t){return e.handleReceivedDeliveryOrder("adopt")})},{default:o((function(){return[a]})),_:1},512),[[n["vShow"],"receive"===e.type&&void 0!==e.id]]),Object(n["withDirectives"])(Object(n["createVNode"])(k,{style:{background:"#5259e5",color:"#fff",margin:"0px 10px"},onClick:t[2]||(t[2]=function(t){return e.rejectReasonVisible=!0})},{default:o((function(){return[s]})),_:1},512),[[n["vShow"],"receive"===e.type&&void 0!==e.id]]),Object(n["withDirectives"])(Object(n["createVNode"])(k,{style:{color:"#5259e5",border:"1px solid #5259e5"},onClick:e.saveAsDraft},{default:o((function(){return[l]})),_:1},8,["onClick"]),[[n["vShow"],void 0===e.id]]),Object(n["createVNode"])("div",d,[Object(n["withDirectives"])(Object(n["createVNode"])(k,{style:{"margin-right":"10px"}},{default:o((function(){return[u]})),_:1},512),[[n["vShow"],void 0===e.id]]),Object(n["withDirectives"])(Object(n["createVNode"])(T,{ref:"upload",action:"",multiple:!0,"file-list":e.fileList,"auto-upload":!1,limit:1,customRequest:e.importWordConfirm},{default:o((function(){return[Object(n["createVNode"])(k,{style:{color:"#5259e5",border:"1px solid #5259e5"}},{default:o((function(){return[v]})),_:1})]})),_:1},8,["file-list","customRequest"]),[[n["vShow"],void 0===e.id]])])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])("div",h,[y,p,Object(n["createVNode"])(B,{ref:"deliveryForm",model:e.delivery,rules:e.rules,layout:"inline","label-col":{offset:1,span:5},"wrapper-col":{offset:1,span:17}},{default:o((function(){return[Object(n["createVNode"])(_,{label:"送货单号",name:"code","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.code,"onUpdate:value":t[3]||(t[3]=function(t){return e.delivery.code=t}),placeholder:"请输入送货单号"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.code),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"订单日期",name:"orderDate","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(I,{placeholder:"请选择日期",value:e.delivery.orderDate,"onUpdate:value":t[4]||(t[4]=function(t){return e.delivery.orderDate=t}),style:{width:"100%"}},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.dateFormat(e.delivery.orderDate)),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"送货日期",name:"deliveryDate","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(I,{placeholder:"请选择日期",value:e.delivery.deliveryDate,"onUpdate:value":t[5]||(t[5]=function(t){return e.delivery.deliveryDate=t}),style:{width:"100%"}},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.dateFormat(e.delivery.deliveryDate)),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"总重量",name:"totalWeight","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.totalWeight,"onUpdate:value":t[6]||(t[6]=function(t){return e.delivery.totalWeight=t}),placeholder:"请输入总重量"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.totalWeight),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"总体积",name:"totalVol","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.totalVol,"onUpdate:value":t[7]||(t[7]=function(t){return e.delivery.totalVol=t}),placeholder:"请输入总体积"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.totalVol),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"运输方式",name:"shippingType","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.shippingType,"onUpdate:value":t[8]||(t[8]=function(t){return e.delivery.shippingType=t}),placeholder:"请输入运输方式"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.shippingType),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),f,j,Object(n["createVNode"])(_,{label:"收货方",name:"shipTo","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("div",null,[Object(n["createVNode"])(R,{"show-search":"",value:e.delivery.customerId,"onUpdate:value":t[9]||(t[9]=function(t){return e.delivery.customerId=t}),placeholder:"请选择收货方",onFocus:e.focus,style:{width:"100%"},"default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":"无匹配项",onSearch:e.handleCustomerSearch,onSelect:e.handleCustomerSelect},{default:o((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.customers,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(q,{key:e.id},{default:o((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1024)})),128))]})),_:1},8,["value","onFocus","onSearch","onSelect"])],512),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.shipTo),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"收货联系人",name:"contacts","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["createVNode"])(R,{"show-search":"",value:e.delivery.contacts,"onUpdate:value":t[10]||(t[10]=function(t){return e.delivery.contacts=t}),placeholder:"请选择收货联系人",onFocus:e.focusDeliCont,style:{width:"100%"},"default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":"无匹配项",onSearch:e.handleSearch,onSelect:e.handleSelect},{default:o((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.customerContacts,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(q,{key:e.id},{default:o((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.contacts),1)]})),_:2},1024)})),128))]})),_:1},8,["value","onFocus","onSearch","onSelect"]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.contacts),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"联系方式",name:"tel","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.tel,"onUpdate:value":t[11]||(t[11]=function(t){return e.delivery.tel=t}),placeholder:"请输入联系方式"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.tel),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"收货地址",name:"address","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.address,"onUpdate:value":t[12]||(t[12]=function(t){return e.delivery.address=t}),placeholder:"请输入收货地址"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.address),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),O,m,Object(n["createVNode"])(_,{label:"送货方",name:"shipper","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.shipper,"onUpdate:value":t[13]||(t[13]=function(t){return e.delivery.shipper=t}),placeholder:"请输入送货方名称"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.shipper),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"送货联系人",name:"shipperTel","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.shipperTel,"onUpdate:value":t[14]||(t[14]=function(t){return e.delivery.shipperTel=t}),placeholder:"请输入送货联系人"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.shipperTel),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"路线",name:"route","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.route,"onUpdate:value":t[15]||(t[15]=function(t){return e.delivery.route=t}),placeholder:"请输入路线"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.route),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(n["createVNode"])(_,{label:"送货金额",name:"amount","has-feedback":"",style:{width:"31%"}},{default:o((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(x,{value:e.delivery.amount,"onUpdate:value":t[16]||(t[16]=function(t){return e.delivery.amount=t}),placeholder:"请输入送货金额"},null,8,["value"]),[[n["vShow"],"edit"===e.sysStatus]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.delivery.amount),513),[[n["vShow"],"view"===e.sysStatus]])]})),_:1})]})),_:1},8,["model","rules"])]),Object(n["createVNode"])("div",w,[g,Object(n["withDirectives"])(Object(n["createVNode"])(k,{style:{float:"right",color:"#5259e5",border:"1px solid #5259e5"},onClick:e.addDeliveryDtl},{default:o((function(){return[S]})),_:1},8,["onClick"]),[[n["vShow"],void 0===e.id]]),D,Object(n["createVNode"])(L,{columns:e.columns,sourceData:e.deliveryMats,editableCols:void 0===e.id?e.editableCols:[],onRowDelete:e.rowDeleteHandler,onCancelEdit:e.cancelEditHandler},null,8,["columns","sourceData","editableCols","onRowDelete","onCancelEdit"])])]),Object(n["createVNode"])(U,{visible:e.rejectReasonVisible,"onUpdate:visible":t[18]||(t[18]=function(t){return e.rejectReasonVisible=t}),centered:"",closable:!1,"mask-closable":!1,onOk:t[19]||(t[19]=function(t){return e.handleReceivedDeliveryOrder("reject")}),okText:"确定",cancelText:"取消"},{default:o((function(){return[Object(n["createVNode"])(F,{value:e.reason,"onUpdate:value":t[17]||(t[17]=function(t){return e.reason=t}),placeholder:"请输入驳回原因",rows:8},null,8,["value"])]})),_:1},8,["visible"])],64)})),N=(r("7db0"),r("4160"),r("a434"),r("d3b7"),r("159b"),r("368b"),r("56cd")),C=(r("7a59"),r("39ab")),k=(r("02cf"),r("9839")),T=(r("519e"),r("0bb7")),x=(r("a71a"),r("b558")),_=(r("04f3"),r("ed3b")),I=(r("e1f5"),r("5efb")),q=r("c1df"),R=r.n(q),B=r("a13b"),L=r("74d2"),F=r("9096"),U=r("3f6c"),M=Object(n["defineComponent"])({components:{"a-button":I["a"],"a-modal":_["a"],"a-input":x["a"],"a-date-picker":T["a"],"a-select":k["b"],"a-upload":C["a"],BaseTableEditable:F["a"]},setup:function(){var e=Object(n["ref"])("view"),t=Object(n["reactive"])([{title:"序号",dataIndex:"key",key:"key",slots:{customRender:"key"},width:70},{title:"物料编码",dataIndex:"code",key:"code",slots:{customRender:"code"}},{title:"规格型号",dataIndex:"name",key:"name",slots:{customRender:"name"}},{title:"送货数量",dataIndex:"qty",key:"qty",ellipsis:!0,slots:{customRender:"qty"}},{title:"送货金额",dataIndex:"amount",key:"amount",ellipsis:!0,slots:{customRender:"amount"}},{title:"销售单号",dataIndex:"salesCode",key:"salesCode",ellipsis:!0,slots:{customRender:"salesCode"}},{title:"行体积",dataIndex:"vol",key:"vol",ellipsis:!0,slots:{customRender:"vol"}},{title:"操作",dataIndex:"operation",key:"operation",slots:{customRender:"operation"}}]),r=Object(n["reactive"])({id:"",code:"",shipTo:"",customerId:void 0,shipper:"",orderDate:R()(),contacts:void 0,deliveryDate:R()(),tel:"",route:"",totalWeight:0,address:"",shippingType:"",shipperTel:"",totalVol:0,status:"",amount:0,authorizationCode:"",businessLicense:"",senderBusinessLicense:"",rowVersion:"",deliveryMats:[]}),o=function(e,t,r){return null===t?Promise.reject(e.message):Promise.resolve()},c=Object(n["reactive"])({code:[{required:!0,message:"送货单号不能为空",trigger:"blur"}],shipTo:[{required:!0,message:"客户名称不能为空",trigger:"blur"}],shipper:[{required:!0,message:"送货方不能为空",trigger:"blur"}],contacts:[{required:!0,message:"客户联系人不能为空",trigger:"blur"}],amount:[{required:!0,message:"送货金额不能为空",trigger:"blur"}],address:[{required:!0,message:"收货地址不能为空",trigger:"blur"}],tel:[{required:!0,message:"联系方式不能为空",trigger:"blur"}],shipperTel:[{required:!0,message:"送货联系人不能为空",trigger:"blur"}],deliveryDate:[{validator:o,message:"送货联系人不能为空",trigger:"blur"}]}),i=Object(n["reactive"])([]),a=["code","name","qty","amount","salesCode","vol"],s=Object(n["ref"])([]),l=function(){i.push({key:String(i.length+1),id:"",code:"",name:"",qty:0,amount:0,salesCode:"",purCode:"",vol:0,deliveryId:""})},d=function(e){i.forEach((function(t,r,n){t.key===e&&n.splice(r,1)}))},u=function(e){i.forEach((function(t,r,n){t.key===e&&(n[r].code="",n[r].name="",n[r].qty=0,n[r].amount=0,n[r].salesCode="",n[r].vol=0)}))},v=Object(n["ref"])(!1),b=Object(n["ref"])(""),h=function(){_["a"].warning({title:"请确认",content:"确定要发送当前送货单吗？",onOk:function(){Object(B["i"])([r.id]).then((function(e){200===e.code&&N["a"].success({message:"成功",description:"发送成功"})})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))},onCancel:function(){}})};return{sysStatus:e,columns:t,delivery:r,deliveryMats:i,editableCols:a,fileList:s,addDeliveryDtl:l,rowDeleteHandler:d,cancelEditHandler:u,rejectReasonVisible:v,send:h,reason:b,rules:c}},data:function(){return{id:this.$route.query.id,type:this.$route.query.type,customers:[],customerContacts:[],customerId:""}},created:function(){"string"===typeof this.id&&"string"===typeof this.type?(this.getData(this.id,this.type),this.sysStatus="view"):(this.loadTenant(),this.sysStatus="edit")},methods:{loadTenant:function(){var e=this;Object(U["a"])({id:localStorage.getItem("doway_cloud_tenant_id")}).then((function(t){200===t.code&&(e.delivery.senderBusinessLicense=t.content.creditCode,e.delivery.shipper=t.content.name,e.delivery.shipperTel=t.content.director)})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))},focus:function(){var e=this;Object(L["b"])().then((function(t){e.customers=t.content}))},focusDeliCont:function(){var e=this;Object(L["c"])({customerId:this.customerId}).then((function(t){e.customerContacts=t.content}))},handleCustomerSelect:function(e){var t=this.customers.find((function(t){return t.id===e}));this.delivery.shipTo=t.name,this.delivery.address=t.address,this.delivery.authorizationCode=t.authorizationCode,this.delivery.businessLicense=t.businessLicense,this.customerId=e},handleCustomerSearch:function(e){var t=this;t.customers=[],Object(L["a"])({name:e}).then((function(e){t.customers=e.content})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))},handleSelect:function(e){var t=this.customerContacts.find((function(t){return t.id=e}));this.delivery.contacts=t.contacts,this.delivery.tel=null===t.mobile?t.mobile:t.tel},handleSearch:function(e){var t=this;t.customerContacts=[],Object(L["c"])({customerId:this.customerId}).then((function(e){t.customerContacts=e.content})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))},importWordConfirm:function(e){var t=e.file,r=new FormData;r.append("file",t),Object(B["b"])(r).then((function(e){N["a"].success({message:"成功",description:e.msg})})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))},dateFormat:function(e){return R()(e).format("YYYY-MM-DD")},saveAsDraft:function(){var e=this,t=e.$refs.deliveryForm;t.validate().then((function(){e.delivery.deliveryMats=e.deliveryMats;var t=[];t.push(e.delivery),Object(B["a"])(t).then((function(t){200===t.code&&(N["a"].success({message:"成功",description:"录入送货单成功"}),e.sysStatus="view")})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))})).catch((function(e){console.debug(e)}))},textFormat:function(e){switch(e){case"draft":return"草稿";case"published":return"已发布";case"confirmed":return"已确认";case"rejected":return"已驳回";case"untreated":return"未处理";default:return e}},getData:function(e,t){var r=this;"send"===t?Object(B["d"])({id:e}).then((function(e){r.delivery.id=e.content.id,r.delivery.code=e.content.code,r.delivery.shipTo=e.content.shipTo,r.delivery.customerId=e.content.customerId,r.delivery.shipper=e.content.shipper,r.delivery.shipperTel=e.content.shipperTel,r.delivery.orderDate=e.content.orderDate,r.delivery.contacts=e.content.contacts,r.delivery.deliveryDate=e.content.deliveryDate,r.delivery.tel=e.content.tel,r.delivery.route=e.content.route,r.delivery.totalWeight=e.content.totalWeight,r.delivery.address=e.content.address,r.delivery.shippingType=e.content.shippingType,r.delivery.totalVol=e.content.totalVol,r.delivery.amount=e.content.amount,r.delivery.status=r.textFormat(e.content.status),r.delivery.authorizationCode=e.content.authorizationCode,r.delivery.businessLicense=e.content.businessLicense,r.delivery.senderBusinessLicense=e.content.senderBusinessLicense,r.delivery.rowVersion=e.content.rowVersion,e.content.deliveryMats.forEach((function(e){r.deliveryMats.push({key:String(r.deliveryMats.length+1),id:e.code,code:e.code,name:e.name,qty:e.qty,amount:e.amount,salesCode:e.salesCode,purCode:e.purCode,vol:e.purCode,deliveryId:e.deliveryId})}))})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)})):Object(B["f"])({id:e}).then((function(e){r.delivery.id=e.content.id,r.delivery.code=e.content.code,r.delivery.shipTo=e.content.shipTo,r.delivery.customerId=e.content.customerId,r.delivery.shipper=e.content.shipper,r.delivery.orderDate=e.content.orderDate,r.delivery.contacts=e.content.contacts,r.delivery.deliveryDate=e.content.deliveryDate,r.delivery.tel=e.content.tel,r.delivery.route=e.content.route,r.delivery.totalWeight=e.content.totalWeight,r.delivery.address=e.content.address,r.delivery.shippingType=e.content.shippingType,r.delivery.totalVol=e.content.totalVol,r.delivery.amount=e.content.amount,r.delivery.status=r.textFormat(e.content.status),r.delivery.authorizationCode=e.content.authorizationCode,r.delivery.businessLicense=e.content.businessLicense,r.delivery.senderBusinessLicense=e.content.senderBusinessLicense,r.delivery.rowVersion=e.content.rowVersion,e.content.deliveryMats.forEach((function(e){r.deliveryMats.push({key:String(r.deliveryMats.length+1),id:e.code,code:e.code,name:e.name,qty:e.qty,amount:e.amount,salesCode:e.salesCode,purCode:e.purCode,vol:e.purCode,deliveryId:e.deliveryId})}))})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))},handleReceivedDeliveryOrder:function(e){var t=this,r={ids:[this.delivery.id],result:e,reason:this.reason};Object(B["e"])(r).then((function(e){t.rejectReasonVisible=!1,200===e.code&&N["a"].success({message:"成功",description:"接收成功"})})).catch((function(e){N["a"].error({message:"错误",description:e}),console.debug(e)}))}}});r("71e8");M.render=V,M.__scopeId="data-v-6b1f2de2";t["default"]=M},a13b:function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"f",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return l})),r.d(t,"a",(function(){return d})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return v})),r.d(t,"i",(function(){return b}));var n=r("b32d"),o="http://cloud.dowaycn.com/Gateway/EblService/api/v1/delivery";function c(e){return Object(n["a"])({url:o+"/loadById",method:"get",params:e})}function i(e){return Object(n["a"])({url:o+"/loadByIdReceived",method:"get",params:e})}function a(e){return Object(n["a"])({url:o+"/generateStatement",method:"post",data:e})}function s(){return Object(n["a"])({url:o+"/queryAll",method:"get"})}function l(){return Object(n["a"])({url:o+"/searchReceivedDelivery",method:"get"})}function d(e){return Object(n["a"])({url:o+"/adds",method:"post",data:e})}function u(e){return Object(n["a"])({url:o+"/handleReceiveDeliveryOrder",method:"post",data:e})}function v(e){return Object(n["a"])({url:o+"/deliveryImport",method:"post",data:e})}function b(e){return Object(n["a"])({url:o+"/sendDeliveryOrder",method:"post",data:e})}}}]);