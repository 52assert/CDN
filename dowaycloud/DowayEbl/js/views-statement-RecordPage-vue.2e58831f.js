(window["webpackJsonp_cloud-ebl-app"]=window["webpackJsonp_cloud-ebl-app"]||[]).push([["views-statement-RecordPage-vue"],{"1e76":function(e,t,n){"use strict";n("4c4d")},"4c4d":function(e,t,n){},"5ed4":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return f})),n.d(t,"d",(function(){return b}));var a=n("b32d"),c="http://cloud.dowaycn.com/Gateway/EblService/api/v1/statement";function r(e){return Object(a["a"])({url:c+"/loadById",method:"get",params:e})}function o(e){return Object(a["a"])({url:c+"/loadByIdReceived",method:"get",params:e})}function i(){return Object(a["a"])({url:c+"/queryAll",method:"get"})}function u(){return Object(a["a"])({url:c+"/queryAllReceived",method:"get"})}function d(e){return Object(a["a"])({url:c+"/generateInvoice",method:"post",data:e})}function s(e){return Object(a["a"])({url:c+"/add",method:"post",data:e})}function l(e){return Object(a["a"])({url:c+"/update",method:"post",data:e})}function f(e){return Object(a["a"])({url:c+"/sendStatement",method:"post",data:e})}function b(e){return Object(a["a"])({url:c+"/handleReceivedStatement",method:"post",data:e})}},8418:function(e,t,n){"use strict";var a=n("c04e"),c=n("9bf2"),r=n("5c6c");e.exports=function(e,t,n){var o=a(t);o in e?c.f(e,o,r(0,n)):e[o]=n}},a434:function(e,t,n){"use strict";var a=n("23e7"),c=n("23cb"),r=n("a691"),o=n("50c4"),i=n("7b0b"),u=n("65f0"),d=n("8418"),s=n("1dde"),l=n("ae40"),f=s("splice"),b=l("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,m=9007199254740991,j="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!b},{splice:function(e,t){var n,a,s,l,f,b,O=i(this),v=o(O.length),x=c(e,v),y=arguments.length;if(0===y?n=a=0:1===y?(n=0,a=v-x):(n=y-2,a=p(h(r(t),0),v-x)),v+n-a>m)throw TypeError(j);for(s=u(O,a),l=0;l<a;l++)f=x+l,f in O&&d(s,l,O[f]);if(s.length=a,n<a){for(l=x;l<v-a;l++)f=l+a,b=l+n,f in O?O[b]=O[f]:delete O[b];for(l=v;l>v-a+n;l--)delete O[l-1]}else if(n>a)for(l=v-a;l>x;l--)f=l+a-1,b=l+n-1,f in O?O[b]=O[f]:delete O[b];for(l=0;l<n;l++)O[l+x]=arguments[l+2];return O.length=v-a+n,s}})},afb4:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c=Object(a["createTextVNode"])(" 新建 "),r=Object(a["createTextVNode"])(" 发送 "),o=Object(a["createTextVNode"])(" 生成发票 "),i=Object(a["createTextVNode"])(" 对账单号 "),u=Object(a["createTextVNode"])(" 客户名称 "),d=Object(a["createTextVNode"])(" 确认 "),s=Object(a["createTextVNode"])(" 驳回 "),l=Object(a["createTextVNode"])(" 对账单号 "),f=Object(a["createTextVNode"])(" 客户名称 ");function b(e,t,n,b,h,p){var m=Object(a["resolveComponent"])("a-button"),j=Object(a["resolveComponent"])("a-col"),O=Object(a["resolveComponent"])("a-select-option"),v=Object(a["resolveComponent"])("a-select"),x=Object(a["resolveComponent"])("a-input-search"),y=Object(a["resolveComponent"])("a-input-group"),C=Object(a["resolveComponent"])("a-row"),g=Object(a["resolveComponent"])("BaseTableEditable"),w=Object(a["resolveComponent"])("a-tab-pane"),N=Object(a["resolveComponent"])("a-tabs"),V=Object(a["resolveComponent"])("a-textarea"),k=Object(a["resolveComponent"])("a-modal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(N,{onChange:e.query},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(w,{key:"send",tab:"我发送的"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,{class:"header"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(j,{span:12},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(m,{type:"primary",style:{margin:"0px 10px 10px 10px"},onClick:e.addStatement},{default:Object(a["withCtx"])((function(){return[c]})),_:1},8,["onClick"]),Object(a["createVNode"])(m,{disabled:0===e.ids.length,type:"primary",style:{margin:"0px 10px 10px 10px"},onClick:e.send},{default:Object(a["withCtx"])((function(){return[r]})),_:1},8,["disabled","onClick"]),Object(a["createVNode"])(m,{type:"primary",onClick:e.generateInvoice,style:{margin:"0px 10px 10px 10px"}},{default:Object(a["withCtx"])((function(){return[o]})),_:1},8,["onClick"])]})),_:1}),Object(a["createVNode"])(j,{span:12},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(y,{compact:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(v,{value:e.searchType1,"onUpdate:value":t[1]||(t[1]=function(t){return e.searchType1=t}),placeholder:"选择搜索条件",style:{width:"100px"},onChange:e.handleSelectChange},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(O,{value:"1"},{default:Object(a["withCtx"])((function(){return[i]})),_:1}),Object(a["createVNode"])(O,{value:"2"},{default:Object(a["withCtx"])((function(){return[u]})),_:1})]})),_:1},8,["value","onChange"]),Object(a["createVNode"])(x,{value:e.searchExp,"onUpdate:value":t[2]||(t[2]=function(t){return e.searchExp=t}),style:{width:"80%"},placeholder:"请输入搜索内容","enter-button":"",onSearch:e.onSearch},null,8,["value","onSearch"])]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(g,{columns:e.columns,sourceData:e.sourceData,destPath:"/statementRecordDtl",type:"send",onSelected:e.setIds},null,8,["columns","sourceData","onSelected"])]})),_:1}),Object(a["createVNode"])(w,{key:"receive",tab:"我接收的"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(C,{class:"header"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(j,{span:12},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(m,{type:"primary",style:{margin:"0px 10px 10px 10px"},onClick:t[3]||(t[3]=function(t){return e.handleReceivedStatement("adopt")})},{default:Object(a["withCtx"])((function(){return[d]})),_:1}),Object(a["createVNode"])(m,{type:"primary",style:{",argin":"0px 10px 10px 10px"},onClick:t[4]||(t[4]=function(t){return e.rejectReasonModal=!0})},{default:Object(a["withCtx"])((function(){return[s]})),_:1})]})),_:1}),Object(a["createVNode"])(j,{span:12},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(y,{compact:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(v,{value:e.searchType2,"onUpdate:value":t[5]||(t[5]=function(t){return e.searchType2=t}),placeholder:"选择搜索条件",style:{width:"100px"},onChange:e.handleSelectChange},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(O,{value:"1"},{default:Object(a["withCtx"])((function(){return[l]})),_:1}),Object(a["createVNode"])(O,{value:"2"},{default:Object(a["withCtx"])((function(){return[f]})),_:1})]})),_:1},8,["value","onChange"]),Object(a["createVNode"])(x,{value:e.searchExp,"onUpdate:value":t[6]||(t[6]=function(t){return e.searchExp=t}),style:{width:"80%"},placeholder:"请输入搜索内容","enter-button":"",onSearch:e.onSearch},null,8,["value","onSearch"])]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(g,{columns:e.columns,sourceData:e.receivedSourceData,destPath:"/statementRecordDtl",type:"receive",onSelected:e.setIds},null,8,["columns","sourceData","onSelected"])]})),_:1})]})),_:1},8,["onChange"]),Object(a["createVNode"])(k,{visible:e.rejectReasonModal,"onUpdate:visible":t[8]||(t[8]=function(t){return e.rejectReasonModal=t}),centered:"",closable:!1,"mask-closable":!1,onOk:t[9]||(t[9]=function(t){return e.handleReceivedInvoice("reject")}),okText:"确定",cancelText:"取消"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(V,{value:e.reason,"onUpdate:value":t[7]||(t[7]=function(t){return e.reason=t}),placeholder:"请输入驳回原因",rows:8},null,8,["value"])]})),_:1},8,["visible"])],64)}n("4160"),n("a434"),n("159b"),n("368b");var h=n("56cd"),p=(n("04f3"),n("ed3b")),m=(n("1815"),n("e32c")),j=(n("50ac"),n("9a63")),O=(n("e1f5"),n("5efb")),v=n("9096"),x=n("5ed4"),y=n("5f70"),C=n.n(y),g=Object(a["defineComponent"])({components:{BaseTableEditable:v["a"],"a-button":O["a"],"a-row":j["a"],"a-col":m["a"],"a-modal":p["a"]},setup:function(){var e=Object(a["reactive"])([{title:"序号",dataIndex:"key",key:"key"},{title:"对账单号",dataIndex:"code",key:"code"},{title:"客户名称",dataIndex:"custName",key:"custName",ellipsis:!0},{title:"时间范围",dataIndex:"timeRange",key:"timeRange",ellipsis:!0},{title:"对账方",dataIndex:"statementParty",key:"statementParty",ellipsis:!0},{title:"对账金额",dataIndex:"amount",key:"amount",ellipsis:!0},{title:"已收金额",dataIndex:"received",key:"received",ellipsis:!0},{title:"欠款金额",dataIndex:"unreceived",key:"unreceived",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0},{title:"操作",dataIndex:"operation",key:"operation",slots:{customRender:"operation"}}]),t=Object(a["reactive"])([]),n=Object(a["reactive"])([]),c=(Object(a["reactive"])([]),Object(a["ref"])(!1)),r=Object(a["ref"])(""),o=function(e){switch(e){case"draft":return"草稿";case"published":return"已发送";case"confirmed":return"已确认";case"rejected":return"已驳回";case"untreated":return"未处理";default:return e}};return Object(a["onMounted"])((function(){Object(x["g"])().then((function(e){e.content.forEach((function(e){t.push({key:String(t.length+1),id:e.id,code:e.code,custName:e.custName,timeRange:C()(e.startTime).format("YYYY-MM-DD")+"--"+C()(e.endTime).format("YYYY-MM-DD"),statementParty:e.statementParty,amount:e.amount,received:e.received,unreceived:e.unreceived,status:o(e.status),authorizationCode:e.authorizationCode,rowVersion:e.rowVersion})}))})).catch((function(e){h["a"].error({message:"错误",description:e}),console.debug(e)}))})),{columns:e,sourceData:t,receivedSourceData:n,rejectReasonModal:c,reason:r,textFormat:o}},data:function(){return{searchExp:"",searchType1:"1",searchType2:"1",selectByCode:!1,selectByCustName:!1,ids:Array()}},methods:{query:function(e){var t=this;"send"===e?Object(x["g"])().then((function(e){t.sourceData.splice(0),e.content.forEach((function(e){t.sourceData.push({key:String(t.sourceData.length+1),id:e.id,code:e.code,custName:e.custName,timeRange:C()(e.startTime).format("YYYY-MM-DD")+"--"+C()(e.endTime).format("YYYY-MM-DD"),statementParty:e.statementParty,amount:e.amount,received:e.received,unreceived:e.unreceived,status:t.textFormat(e.status),authorizationCode:e.authorizationCode,rowVersion:e.rowVersion})}))})).catch((function(e){h["a"].error({message:"错误",description:e}),console.debug(e)})):"receive"===e&&Object(x["f"])().then((function(e){t.receivedSourceData.splice(0),e.content.forEach((function(e){t.receivedSourceData.push({key:String(t.receivedSourceData.length+1),id:e.id,code:e.code,custName:e.custName,timeRange:C()(e.startTime).format("YYYY-MM-DD")+"--"+C()(e.endTime).format("YYYY-MM-DD"),statementParty:e.statementParty,amount:e.amount,received:e.received,unreceived:e.unreceived,status:t.textFormat(e.status),rowVersion:e.rowVersion,authorizationCode:e.authorizationCode})}))})).catch((function(e){h["a"].error({message:"错误",description:e}),console.debug(e)}))},generateInvoice:function(){Object(x["b"])(this.ids).then((function(e){200===e.code&&h["a"].success({message:"成功",description:"已成功生成发票"})})).catch((function(e){h["a"].error({message:"错误",description:e}),console.debug(e)}))},addStatement:function(){this.$router.push({path:"/statementRecordDtl"})},send:function(){Object(x["h"])(this.ids).then((function(e){200===e.code&&h["a"].success({message:"成功",description:"发送成功"})})).catch((function(e){h["a"].error({message:"错误",description:e}),console.debug(e)}))},setIds:function(e){var t=this;t.ids=[],null!==e&&e.forEach((function(e){t.ids.push(e.id)}))},handleReceivedStatement:function(e){var t=this,n={ids:this.ids,result:e,reason:this.reason};Object(x["d"])(n).then((function(e){t.rejectReasonModal=!1,200===e.code&&h["a"].success({message:"成功",description:"接收成功"})})).catch((function(e){h["a"].error({message:"错误",description:e}),console.debug(e)}))},onSearch:function(e){console.log("use value",e)},handleSelectChange:function(){"1"==this.searchType1?this.selectByCode=!0:this.selectByCustName=!0}}});n("1e76");g.render=b;t["default"]=g}}]);