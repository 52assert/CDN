(window["webpackJsonp_cloud-ebl-app"]=window["webpackJsonp_cloud-ebl-app"]||[]).push([["views-invoice-RecordDtlPage-vue"],{1815:function(e,t,n){"use strict";n("b550"),n("d79d")},"3f6c":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n("b32d"),i="http://cloud.dowaycn.com/Gateway/CenterService/api/v1/tenant";function o(e){return Object(c["a"])({url:i+"/loadById",method:"get",params:e})}},"455d":function(e,t,n){},"4f48":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"j",(function(){return b})),n.d(t,"i",(function(){return v})),n.d(t,"b",(function(){return f}));var c=n("b32d"),i="http://cloud.dowaycn.com/Gateway/EblService/api/v1/invoice";function o(e){return Object(c["a"])({url:i+"/loadById",method:"get",params:e})}function r(e){return Object(c["a"])({url:i+"/loadByIdReceived",method:"get",params:e})}function a(){return Object(c["a"])({url:i+"/queryAll",method:"get"})}function s(){return Object(c["a"])({url:i+"/queryAllReceived",method:"get"})}function u(e){return Object(c["a"])({url:i+"/searchByExp",method:"post",data:e})}function l(e){return Object(c["a"])({url:i+"/searchReceivedByExp",method:"post",data:e})}function d(e){return Object(c["a"])({url:i+"/add",method:"post",data:e})}function b(e){return Object(c["a"])({url:i+"/update",method:"post",data:e})}function v(e){return Object(c["a"])({url:i+"/sendInvoice",method:"post",data:e})}function f(e){return Object(c["a"])({url:i+"/handleReceiveInvoice",method:"post",data:e})}},"50ac":function(e,t,n){"use strict";n("b550"),n("d79d")},"5ed4":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"k",(function(){return d})),n.d(t,"j",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return m}));var c=n("b32d"),i="http://cloud.dowaycn.com/Gateway/EblService/api/v1/statement";function o(e){return Object(c["a"])({url:i+"/loadById",method:"get",params:e})}function r(e){return Object(c["a"])({url:i+"/loadByIdReceived",method:"get",params:e})}function a(){return Object(c["a"])({url:i+"/queryAll",method:"get"})}function s(){return Object(c["a"])({url:i+"/queryAllReceived",method:"get"})}function u(e){return Object(c["a"])({url:i+"/generateInvoice",method:"post",data:e})}function l(e){return Object(c["a"])({url:i+"/add",method:"post",data:e})}function d(e){return Object(c["a"])({url:i+"/update",method:"post",data:e})}function b(e){return Object(c["a"])({url:i+"/sendStatement",method:"post",data:e})}function v(e){return Object(c["a"])({url:i+"/handleReceivedStatement",method:"post",data:e})}function f(e){return Object(c["a"])({url:i+"/searchByExp",method:"post",data:e})}function m(e){return Object(c["a"])({url:i+"/searchReceivedByExp",method:"post",data:e})}},"74d2":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a}));var c=n("b32d"),i="http://cloud.dowaycn.com/Gateway/BaseService/api/v1/customer";function o(e){return Object(c["a"])({url:i+"/loadByName",method:"get",params:e})}function r(e){return Object(c["a"])({url:i+"/queryAllContacts",method:"get",params:e})}function a(){return Object(c["a"])({url:i+"/query",method:"get"})}},"79a7":function(e,t,n){"use strict";n("455d")},"7db0":function(e,t,n){"use strict";var c=n("23e7"),i=n("b727").find,o=n("44d2"),r=n("ae40"),a="find",s=!0,u=r(a);a in[]&&Array(1)[a]((function(){s=!1})),c({target:"Array",proto:!0,forced:s||!u},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},"8c7d":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),i=Object(c["withScopeId"])("data-v-0334b543");Object(c["pushScopeId"])("data-v-0334b543");var o={class:"page_header"},r=Object(c["createTextVNode"])("发送"),a=Object(c["createTextVNode"])("确认"),s=Object(c["createTextVNode"])("驳回"),u=Object(c["createTextVNode"])("保存"),l=Object(c["createTextVNode"])("编辑"),d=Object(c["createTextVNode"])("放弃"),b={class:"page_body"},v={class:"page_box"},f=Object(c["createVNode"])("span",{class:"title"},"基本信息",-1),m=Object(c["createVNode"])("hr",{style:{border:"0",background:"#dadada",height:"1px"}},null,-1),h=Object(c["createVNode"])("br",null,null,-1),p=Object(c["createVNode"])("br",null,null,-1),y={class:"page_box"},j=Object(c["createVNode"])("span",{class:"title"},"发票详情",-1),O=Object(c["createTextVNode"])(" 添加明细 "),g=Object(c["createVNode"])("hr",{style:{border:"0",background:"#dadada",height:"1px"}},null,-1),w=Object(c["createTextVNode"])("//未税金额：1000.00"),S=Object(c["createTextVNode"])("//税额：0.00"),k=Object(c["createTextVNode"])("//总计：1000.00"),V={class:"page_box"},N=Object(c["createVNode"])("span",{class:"title"},"对账单详情",-1),x=Object(c["createTextVNode"])(" 添加明细 "),D=Object(c["createVNode"])("hr",{style:{border:"0",background:"#dadada",height:"1px"}},null,-1),A={style:{height:"475px",overflow:"auto"}};Object(c["popScopeId"])();var R=i((function(e,t,n,R,I,T){var C=Object(c["resolveComponent"])("a-button"),B=Object(c["resolveComponent"])("a-input"),_=Object(c["resolveComponent"])("a-form-item"),q=Object(c["resolveComponent"])("a-date-picker"),E=Object(c["resolveComponent"])("a-select-option"),U=Object(c["resolveComponent"])("a-select"),L=Object(c["resolveComponent"])("a-form"),P=Object(c["resolveComponent"])("BaseTableEditable"),F=Object(c["resolveComponent"])("a-col"),z=Object(c["resolveComponent"])("a-row"),H=Object(c["resolveComponent"])("a-textarea"),G=Object(c["resolveComponent"])("a-modal"),Y=Object(c["resolveComponent"])("a-table");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("div",o,[Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:e.send},{default:i((function(){return[r]})),_:1},8,["onClick"]),[[c["vShow"],"send"===e.type||void 0!==e.id]]),Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:t[1]||(t[1]=function(t){return e.handleReceivedPurchaseOrder("adopt")})},{default:i((function(){return[a]})),_:1},512),[[c["vShow"],"receive"===e.type&&void 0!==e.id]]),Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:t[2]||(t[2]=function(t){return e.rejectReasonVisible=!0})},{default:i((function(){return[s]})),_:1},512),[[c["vShow"],"receive"===e.type&&void 0!==e.id]]),Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:e.save},{default:i((function(){return[u]})),_:1},8,["onClick"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{color:"#5259e5",border:"1px solid #5259e5"},onClick:e.editDtl},{default:i((function(){return[l]})),_:1},8,["onClick"]),[[c["vShow"],"send"===e.type&&"view"===e.sysStatus&&void 0!==e.id]]),Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{color:"#5259e5",border:"1px solid #5259e5"},onClick:e.cancelEdit},{default:i((function(){return[d]})),_:1},8,["onClick"]),[[c["vShow"],"send"===e.type&&"edit"===e.sysStatus]])]),Object(c["createVNode"])("div",b,[Object(c["createVNode"])("div",v,[f,m,Object(c["createVNode"])(L,{ref:"purchaseBaseForm",model:e.invoice,rules:e.rules,layout:"inline","label-col":{offset:1,span:5},"wrapper-col":{offset:1,span:17}},{default:i((function(){return[Object(c["createVNode"])(_,{label:"发票代码",name:"code","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.code,"onUpdate:value":t[3]||(t[3]=function(t){return e.invoice.code=t}),placeholder:"请输入发票代码"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.code),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"开票日期",name:"date","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(q,{value:e.invoice.date,"onUpdate:value":t[4]||(t[4]=function(t){return e.invoice.date=t}),placeholder:"请选择开票日期",style:{width:"100%"}},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.dateFormat(e.invoice.date)),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"服务名称",name:"name","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.name,"onUpdate:value":t[5]||(t[5]=function(t){return e.invoice.name=t}),placeholder:"请输入服务名称"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.name),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"备注",name:"remark","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.remark,"onUpdate:value":t[6]||(t[6]=function(t){return e.invoice.remark=t}),placeholder:"请输入备注"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.remark),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),h,Object(c["createVNode"])(_,{label:"购票方",name:"buyer","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("div",null,[Object(c["createVNode"])(U,{value:e.invoice.buyer,"onUpdate:value":t[7]||(t[7]=function(t){return e.invoice.buyer=t}),placeholder:"请选择客户名称","show-search":"","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":"无匹配项",style:{width:"100%"},onFocus:e.focusHandler,onSearch:e.handleCustomerSearch,onSelect:e.handleCustomerSelect},{default:i((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.customers,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:e.id},{default:i((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.name),1)]})),_:2},1024)})),128))]})),_:1},8,["value","onFocus","onSearch","onSelect"])],512),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.buyer),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"公司地址",name:"buyerAddress","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.buyerAddress,"onUpdate:value":t[8]||(t[8]=function(t){return e.invoice.buyerAddress=t}),placeholder:"请输入公司地址"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.buyerAddress),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"联系电话",name:"buyerAddress","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.buyerAddress,"onUpdate:value":t[9]||(t[9]=function(t){return e.invoice.buyerAddress=t}),placeholder:"请输入联系电话"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.buyerAddress),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"联系电话",name:"buyerTel","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.buyerTel,"onUpdate:value":t[10]||(t[10]=function(t){return e.invoice.buyerTel=t}),placeholder:"请输入联系电话"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.buyerTel),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"纳税号",name:"buyerIdentification","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{disabled:"",value:e.invoice.buyerIdentification,"onUpdate:value":t[11]||(t[11]=function(t){return e.invoice.buyerIdentification=t}),placeholder:"请输入纳税号"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.buyerIdentification),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"开户行",name:"buyerRegBank","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.buyerRegBank,"onUpdate:value":t[12]||(t[12]=function(t){return e.invoice.buyerRegBank=t}),placeholder:"请输入开户行"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.buyerRegBank),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"银行账号",name:"buyerAccount","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.buyerAccount,"onUpdate:value":t[13]||(t[13]=function(t){return e.invoice.buyerAccount=t}),placeholder:"请输入银行账号"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.buyerAccount),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),p,Object(c["createVNode"])(_,{label:"销售方",name:"seller","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.seller,"onUpdate:value":t[14]||(t[14]=function(t){return e.invoice.seller=t}),placeholder:"请输入销售方"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.seller),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"公司地址",name:"sellerAddress","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.sellerAddress,"onUpdate:value":t[15]||(t[15]=function(t){return e.invoice.sellerAddress=t}),placeholder:"请输入公司地址"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.sellerAddress),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"联系电话",name:"sellerTel","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.sellerTel,"onUpdate:value":t[16]||(t[16]=function(t){return e.invoice.sellerTel=t}),placeholder:"请输入联系电话"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.sellerTel),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"纳税号",name:"sellerIdentification","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{disabled:"",value:e.invoice.sellerIdentification,"onUpdate:value":t[17]||(t[17]=function(t){return e.invoice.sellerIdentification=t}),placeholder:"请输入纳税号"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.sellerIdentification),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"开户行",name:"sellerRegBank","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.sellerRegBank,"onUpdate:value":t[18]||(t[18]=function(t){return e.invoice.sellerRegBank=t}),placeholder:"请输入开户行"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.sellerRegBank),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(_,{label:"银行账号",name:"sellerAccount","has-feedback":"",style:{width:"31%"}},{default:i((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(B,{value:e.invoice.sellerAccount,"onUpdate:value":t[19]||(t[19]=function(t){return e.invoice.sellerAccount=t}),placeholder:"请输入银行账号"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.invoice.sellerAccount),513),[[c["vShow"],"view"===e.sysStatus]])]})),_:1})]})),_:1},8,["model","rules"])]),Object(c["createVNode"])("div",y,[j,Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{float:"right",color:"#5259e5",border:"1px solid #5259e5"},onClick:e.addInvoiceDtl},{default:i((function(){return[O]})),_:1},8,["onClick"]),[[c["vShow"],"edit"===e.sysStatus]]),g,Object(c["createVNode"])(P,{columns:e.invoiceColumns,sourceData:e.invoiceDtl,editableCols:e.editableCols,onRowDelete:e.rowDeleteHandler,onCancelEdit:e.cancelEditHandler},null,8,["columns","sourceData","editableCols","onRowDelete","onCancelEdit"]),Object(c["createVNode"])(z,{style:{"margin-top":"10px"}},{default:i((function(){return[Object(c["createVNode"])(F,{offset:15,span:3,style:{"text-align":"center"}},{default:i((function(){return[w]})),_:1}),Object(c["createVNode"])(F,{span:3,style:{"text-align":"center"}},{default:i((function(){return[S]})),_:1}),Object(c["createVNode"])(F,{span:3,style:{"text-align":"center"}},{default:i((function(){return[k]})),_:1})]})),_:1})]),Object(c["createVNode"])("div",V,[N,Object(c["withDirectives"])(Object(c["createVNode"])(C,{style:{float:"right",color:"#5259e5",border:"1px solid #5259e5"},onClick:e.addStatement},{default:i((function(){return[x]})),_:1},8,["onClick"]),[[c["vShow"],"edit"===e.sysStatus]]),D,Object(c["createVNode"])(P,{columns:e.statementColumns,sourceData:e.statements},null,8,["columns","sourceData"])])]),Object(c["createVNode"])(G,{visible:e.rejectReasonVisible,"onUpdate:visible":t[21]||(t[21]=function(t){return e.rejectReasonVisible=t}),centered:"",closable:!1,"mask-closable":!1,onOk:t[22]||(t[22]=function(t){return e.handleReceivedInvoice("reject")}),okText:"确定",cancelText:"取消"},{default:i((function(){return[Object(c["createVNode"])(H,{value:e.reason,"onUpdate:value":t[20]||(t[20]=function(t){return e.reason=t}),placeholder:"请输入驳回原因",rows:8},null,8,["value"])]})),_:1},8,["visible"]),Object(c["createVNode"])(G,{visible:e.statementShowVisible,"onUpdate:visible":t[23]||(t[23]=function(t){return e.statementShowVisible=t}),title:"请选择相应的对账单",centered:"",width:"1080px",closable:!1,"mask-closable":!1,onOk:e.selectStatement,okText:"确定",cancelText:"取消"},{default:i((function(){return[Object(c["createVNode"])("div",A,[Object(c["createVNode"])(Y,{columns:e.statementColumns,"data-source":e.statementData,"row-selection":e.rowSelection,pagination:!1},null,8,["columns","data-source","row-selection"])])]})),_:1},8,["visible","onOk"])],64)})),I=(n("7db0"),n("4160"),n("a434"),n("d3b7"),n("159b"),n("368b"),n("56cd")),T=(n("02cf"),n("9839")),C=(n("519e"),n("0bb7")),B=(n("a71a"),n("b558")),_=(n("04f3"),n("ed3b")),q=(n("1815"),n("e32c")),E=(n("50ac"),n("9a63")),U=(n("e1f5"),n("5efb")),L=n("9096"),P=n("c1df"),F=n.n(P),z=n("4f48"),H=n("5ed4"),G=n("74d2"),Y=n("3f6c"),$=Object(c["defineComponent"])({components:{"a-button":U["a"],"a-row":E["a"],"a-col":q["a"],"a-modal":_["a"],"a-input":B["a"],"a-date-picker":C["a"],"a-select":T["b"],BaseTableEditable:L["a"]},setup:function(){var e=Object(c["ref"])("edit"),t=function(e,t,n){return null===t?Promise.reject(e.message):Promise.resolve()},n=Object(c["reactive"])([{title:"序号",dataIndex:"key",key:"key",width:70},{title:"服务名称",dataIndex:"name",key:"name",slots:{customRender:"name"}},{title:"规格型号",dataIndex:"model",key:"model",ellipsis:!0,slots:{customRender:"model"}},{title:"计量单位",dataIndex:"uom",key:"uom",ellipsis:!0,slots:{customRender:"uom"}},{title:"数量",dataIndex:"num",key:"num",ellipsis:!0,slots:{customRender:"num"}},{title:"单价",dataIndex:"price",key:"price",ellipsis:!0,slots:{customRender:"price"}},{title:"税率",dataIndex:"taxRate",key:"taxRate",ellipsis:!0,slots:{customRender:"taxRate"}},{title:"税额",dataIndex:"taxAmount",key:"taxAmount",ellipsis:!0,slots:{customRender:"taxAmount"}},{title:"价税合计",dataIndex:"total",key:"total",ellipsis:!0,slots:{customRender:"total"}},{title:"操作",dataIndex:"operation",key:"operation",slots:{customRender:"operation"}}]),i=(Object(c["reactive"])({code:[{required:!0,message:"发票编码不能为空",trigger:"blur"}],name:[{required:!0,message:"服务名称不能为空",trigger:"blur"}],date:[{validator:t,message:"开票日期不能为空",trigger:"blur"}],remark:[{required:!0,message:"备注不能为空",trigger:"blur"}],buyer:[{required:!0,message:"购票方不能为空",trigger:"blur"}],buyerAddress:[{required:!0,message:"公司地址不能为空",trigger:"blur"}],buyerTel:[{required:!0,message:"联系电话不能为空",trigger:"blur"}],buyerIdentification:[{required:!0,message:"纳税号不能为空",trigger:"blur"}],buyerRegBank:[{required:!0,message:"开户行不能为空",trigger:"blur"}],buyerAccount:[{required:!0,message:"银行账号不能为空",trigger:"blur"}],seller:[{required:!0,message:"销售方不能为空",trigger:"blur"}],sellerAddress:[{required:!0,message:"公司地址不能为空",trigger:"blur"}],sellerTel:[{required:!0,message:"联系电话不能为空",trigger:"blur"}],sellerIdentification:[{required:!0,message:"纳税号不能为空",trigger:"blur"}],sellerRegBank:[{required:!0,message:"开户行不能为空",trigger:"blur"}],sellerAccount:[{required:!0,message:"银行帐号不能为空",trigger:"blur"}]}),Object(c["reactive"])({id:"",name:"",code:"",date:F()(),remark:"",buyer:"",buyerAddress:"",buyerTel:"",buyerIdentification:"",buyerRegBank:"",buyerAccount:"",seller:"",sellerAddress:"",sellerTel:"",sellerIdentification:"",sellerRegBank:"",sellerAccount:"",status:"untreated",amount:0,authorizationCode:"",businessLicense:"",senderBusinessLicense:"",rowVersion:"",statements:[],invoiceDetails:[]})),o=["name","model","uom","num","price","taxRate","taxAmount","total"],r=Object(c["reactive"])([]),a=function(){r.push({key:String(r.length+1),name:"",model:"",uom:"",num:"",price:"",taxRate:"",taxAmount:"",total:"",rowVersion:""})},s=Object(c["reactive"])([{title:"序号",dataIndex:"key",key:"key",width:70},{title:"对账单号",dataIndex:"code",key:"code"},{title:"客户名称",dataIndex:"custName",key:"custName",ellipsis:!0},{title:"开始时间",dataIndex:"startTime",key:"startTime",ellipsis:!0},{title:"结束时间",dataIndex:"endTime",key:"endTime",ellipsis:!0},{title:"对账方",dataIndex:"statementParty",key:"statementParty",ellipsis:!0},{title:"对账金额",dataIndex:"amount",key:"amount",ellipsis:!0},{title:"已收金额",dataIndex:"received",key:"received",ellipsis:!0},{title:"欠款金额",dataIndex:"unreceived",key:"unreceived",ellipsis:!0},{title:"操作",dataIndex:"operation",key:"operation",slots:{customRender:"operation"}}]),u=Object(c["reactive"])([]),l=Object(c["reactive"])([]),d=Object(c["reactive"])([]),b=[],v=Object(c["ref"])(!1),f=Object(c["reactive"])({onChange:function(e,t){void 0!==t&&(b=t)}}),m=function(){v.value=!0,b=[],Object(H["g"])().then((function(e){e.content.forEach((function(e){u.push({key:String(u.length+1),id:e.id,code:e.code,custName:e.custName,startTime:e.startTime,endTime:e.endTime,statementParty:e.statementParty,amount:e.amount,received:e.received,unreceived:e.unreceived,rowVersion:e.rowVersion})}))})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},h=function(e){l.splice(e,1)},p=function(){d=b,d.forEach((function(e){l.push({key:String(l.length+1),id:e.id,code:e.code,custName:e.custName,startTime:e.startTime,endTime:e.endTime,statementParty:e.statementParty,amount:e.amount,received:e.received,unreceived:e.unreceived,rowVersion:e.rowVersion})})),v.value=!1},y=Object(c["ref"])(!1),j=Object(c["ref"])(""),O=function(){e.value="edit"},g=function(e){r.forEach((function(t,n,c){t.key===e&&c.splice(n,1)}))},w=function(e){r.forEach((function(t,n,c){t.key===e&&(c[n].name="",c[n].model="",c[n].uom="",c[n].num="",c[n].price="",c[n].taxRate="",c[n].taxAmount="",c[n].total="")}))},S=function(){_["a"].warning({title:"请确认",content:"确定要发送当前送货单吗？",onOk:function(){Object(z["i"])([i.id]).then((function(e){200===e.code&&I["a"].success({message:"成功",description:"发送成功"})})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},onCancel:function(){}})};return{sysStatus:e,invoiceColumns:n,invoice:i,editableCols:o,invoiceDtl:r,addInvoiceDtl:a,statementColumns:s,statementData:u,statements:l,statementShowVisible:v,rowSelection:f,addStatement:m,deleteStatement:h,selectStatement:p,reason:j,rejectReasonVisible:y,editDtl:O,rowDeleteHandler:g,cancelEditHandler:w,send:S}},data:function(){return{id:this.$route.query.id,type:this.$route.query.type,customers:[]}},created:function(){void 0!==this.id&&void 0!==this.type?(this.getData(String(this.id),String(this.type)),this.sysStatus="view"):(this.sysStatus="edit",this.loadTenant())},methods:{getInvoice:function(e){var t=this;Object(z["c"])({id:e}).then((function(e){t.invoice.id=e.content.id,t.invoice.code=e.content.code,t.invoice.date=e.content.date,t.invoice.amount=e.content.amount,t.invoice.buyer=e.content.buyer,t.invoice.buyerIdentification=e.content.buyerIdentification,t.invoice.buyerAddress=e.content.buyerAddress,t.invoice.buyerTel=e.content.buyerTel,t.invoice.buyerRegBank=e.content.buyerRegBank,t.invoice.buyerAccount=e.content.buyerAccount,t.invoice.seller=e.content.seller,t.invoice.sellerIdentification=e.content.sellerIdentification,t.invoice.sellerAddress=e.content.sellerAddress,t.invoice.sellerTel=e.content.sellerTel,t.invoice.sellerRegBank=e.content.sellerRegBank,t.invoice.sellerAccount=e.content.sellerAccount,t.invoice.remark=e.content.remark,t.invoice.status=t.textFormat(e.content.status),t.invoice.authorizationCode=e.content.authorizationCode,t.invoice.businessLicense=e.content.businessLicense,t.invoice.senderBusinessLicense=e.content.senderBusinessLicense,t.invoice.rowVersion=e.content.rowVersion,e.content.invoiceDetails.forEach((function(e){t.invoiceDtl.push({key:String(t.invoiceDtl.length+1),name:e.name,model:e.model,uom:e.uom,num:e.num,price:e.price,taxRate:e.taxRate,taxAmount:e.taxAmount,total:e.total,rowVersion:e.rowVersion})})),e.content.statements.forEach((function(e){t.statements.push({key:String(t.statements.length+1),id:e.id,code:e.code,custName:e.custName,startTime:e.startTime,endTime:e.endTime,statementParty:e.statementParty,amount:e.amount,received:e.received,unreceived:e.unreceived,rowVersion:e.rowVersion})}))})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},getInvoiceReceived:function(e){var t=this;Object(z["d"])({id:e}).then((function(e){t.invoice.id=e.content.id,t.invoice.code=e.content.code,t.invoice.date=e.content.date,t.invoice.amount=e.content.amount,t.invoice.buyer=e.content.buyer,t.invoice.buyerIdentification=e.content.buyerIdentification,t.invoice.buyerAddress=e.content.buyerAddress,t.invoice.buyerTel=e.content.buyerTel,t.invoice.buyerRegBank=e.content.buyerRegBank,t.invoice.buyerAccount=e.content.buyerAccount,t.invoice.seller=e.content.seller,t.invoice.sellerIdentification=e.content.sellerIdentification,t.invoice.sellerAddress=e.content.sellerAddress,t.invoice.sellerTel=e.content.sellerTel,t.invoice.sellerRegBank=e.content.sellerRegBank,t.invoice.sellerAccount=e.content.sellerAccount,t.invoice.remark=e.content.remark,t.invoice.status=t.textFormat(e.content.status),t.invoice.authorizationCode=e.content.authorizationCode,t.invoice.businessLicense=e.content.businessLicense,t.invoice.senderBusinessLicense=e.content.senderBusinessLicense,t.invoice.rowVersion=e.content.rowVersion,e.content.invoiceDetailReceiveds.forEach((function(e){t.invoiceDtl.push({key:String(t.invoiceDtl.length+1),name:e.name,model:e.model,uom:e.uom,num:e.num,price:e.price,taxRate:e.taxRate,taxAmount:e.taxAmount,total:e.total,rowVersion:e.rowVersion})})),e.content.statementReceiveds.forEach((function(e){t.statements.push({key:String(t.statements.length+1),id:e.id,code:e.code,custName:e.custName,startTime:e.startTime,endTime:e.endTime,statementParty:e.statementParty,amount:e.amount,received:e.received,unreceived:e.unreceived,rowVersion:e.rowVersion})}))})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},getData:function(e,t){"send"===t?this.getInvoice(e):"receive"===t&&this.getInvoiceReceived(e)},focusHandler:function(){var e=this;Object(G["b"])().then((function(t){e.customers=t.content})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},handleCustomerSelect:function(e){var t=this.customers.find((function(t){return t.id===e}));this.invoice.buyerIdentification=t.businessLicense,this.invoice.buyerAddress=t.address,this.invoice.buyerTel=t.tel,this.invoice.buyerRegBank=t.regBank,this.invoice.buyerAccount=t.regBankAccount,this.invoice.authorizationCode=t.authorizationCode,this.invoice.businessLicense=t.businessLicense},handleCustomerSearch:function(e){var t=this;t.customers=[],Object(G["a"])({name:e}).then((function(e){t.customers=e.content})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},loadTenant:function(){var e=this;Object(Y["a"])({id:localStorage.getItem("doway_cloud_tenant_id")}).then((function(t){200===t.code&&(e.invoice.senderBusinessLicense=t.content.creditCode,e.invoice.sellerIdentification=t.content.creditCode,t.content.name&&t.content.address&&t.content.tel&&t.content.regBank&&t.content.account||I["a"].warning({message:"警告",description:"当前租户信息缺失，请到信息设置中完善"}),e.invoice.seller=t.content.name,e.invoice.sellerAddress=t.content.address,e.invoice.sellerTel=t.content.tel,e.invoice.sellerRegBank=t.content.regBank,e.invoice.sellerAccount=t.content.account)})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},cancelEdit:function(){void 0!==this.id?this.sysStatus="view":this.$router.push({path:"/invoiceRecord"})},handleReceivedInvoice:function(e){var t=this,n={ids:[t.invoice.id],result:e,reason:t.reason};Object(z["b"])(n).then((function(e){t.rejectReasonVisible=!1,200===e.code&&I["a"].success({message:"成功",description:"已处理"})})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},textFormat:function(e){switch(e){case"draft":return"草稿";case"published":return"已发布";case"confirmed":return"已确认";case"rejected":return"已驳回";case"untreated":return"未处理";default:return e}},save:function(){var e=this;e.invoice.statements=e.statements,e.invoice.invoiceDetails=e.invoiceDtl;var t=e.invoice;void 0!==e.id?Object(z["j"])(t).then((function(t){200===t.code&&(e.sysStatus="view")})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)})):Object(z["a"])(t).then((function(t){200===t.code&&(e.sysStatus="view")})).catch((function(e){I["a"].error({message:"错误",description:e}),console.debug(e)}))},dateFormat:function(e){return F()(e).format("YYYY-MM-DD")}}});n("79a7"),n("fa9c");$.render=R,$.__scopeId="data-v-0334b543";t["default"]=$},"9a63":function(e,t,n){"use strict";var c=n("290c");c["a"].install=function(e){e.component(c["a"].name,c["a"])},t["a"]=c["a"]},b0c0:function(e,t,n){var c=n("83ab"),i=n("9bf2").f,o=Function.prototype,r=o.toString,a=/^\s*function ([^ (]*)/,s="name";c&&!(s in o)&&i(o,s,{configurable:!0,get:function(){try{return r.call(this).match(a)[1]}catch(e){return""}}})},e32c:function(e,t,n){"use strict";var c=n("da05");c["b"].install=function(e){e.component(c["b"].name,c["b"])},t["a"]=c["b"]},e545:function(e,t,n){},fa9c:function(e,t,n){"use strict";n("e545")}}]);