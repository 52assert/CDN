(window["webpackJsonp_cloud-ebl-app"]=window["webpackJsonp_cloud-ebl-app"]||[]).push([["views-delivery-RecordDtlPage-vue"],{1815:function(e,t,n){"use strict";n("b550"),n("d79d")},"2bbf":function(e,t,n){},"50ac":function(e,t,n){"use strict";n("b550"),n("d79d")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var c=n("1d80"),r=n("5899"),o="["+r+"]",a=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(c(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(e,t,n){var c=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var o,a;return r&&"function"==typeof(o=t.constructor)&&o!==n&&c(a=o.prototype)&&a!==n.prototype&&r(e,a),e}},"74d2":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i}));var c=n("b32d"),r="http://cloud.dowaycn.com/Gateway/BaseService/api/v1/customer";function o(e){return Object(c["a"])({url:r+"/loadByName",method:"get",params:e})}function a(e){return Object(c["a"])({url:r+"/queryAllContacts",method:"get",params:e})}function i(){return Object(c["a"])({url:r+"/query",method:"get"})}},"7c49":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),r=Object(c["withScopeId"])("data-v-c3e83fce");Object(c["pushScopeId"])("data-v-c3e83fce");var o={class:"header"},a=Object(c["createTextVNode"])("发送"),i=Object(c["createTextVNode"])("确认"),s=Object(c["createTextVNode"])("驳回"),d=Object(c["createTextVNode"])("保存为草稿"),l={style:{float:"right","text-align":"center"}},u=Object(c["createVNode"])("a",{href:"http://cloud.dowaycn.com/Gateway/EblService/api/v1/delivery/deliveryDown"},"下载模板",-1),v=Object(c["createTextVNode"])("上传文件"),p={class:"info"},f={class:"box"},b=Object(c["createVNode"])("span",{class:"title"},"基本信息",-1),y=Object(c["createVNode"])("hr",{style:{border:"0",background:"#dadada",height:"1px"}},null,-1),h=Object(c["createTextVNode"])("送货单号"),O=Object(c["createTextVNode"])("收货方"),j=Object(c["createTextVNode"])("送货方"),m=Object(c["createTextVNode"])("订单日期"),N=Object(c["createTextVNode"])("收货联系人"),V=Object(c["createTextVNode"])("送货联系人"),w=Object(c["createTextVNode"])("送货日期"),g=Object(c["createTextVNode"])("联系方式"),S=Object(c["createTextVNode"])("路线"),x=Object(c["createTextVNode"])("总重量"),D=Object(c["createTextVNode"])("收货地址"),C=Object(c["createTextVNode"])("运输方式"),T=Object(c["createTextVNode"])("总体积"),_=Object(c["createTextVNode"])("送货金额"),I={class:"box"},k=Object(c["createVNode"])("span",{class:"title"},"送货信息",-1),R=Object(c["createTextVNode"])(" 添加明细 "),E=Object(c["createVNode"])("hr",{style:{border:"0",background:"#dadada",height:"1px"}},null,-1);Object(c["popScopeId"])();var F=r((function(e,t,n,F,B,L){var M=Object(c["resolveComponent"])("a-button"),U=Object(c["resolveComponent"])("a-upload"),q=Object(c["resolveComponent"])("a-col"),A=Object(c["resolveComponent"])("a-input"),W=Object(c["resolveComponent"])("a-select-option"),Y=Object(c["resolveComponent"])("a-select"),z=Object(c["resolveComponent"])("a-row"),G=Object(c["resolveComponent"])("a-date-picker"),H=Object(c["resolveComponent"])("BaseTableEditable"),P=Object(c["resolveComponent"])("a-textarea"),$=Object(c["resolveComponent"])("a-modal");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("div",o,[Object(c["withDirectives"])(Object(c["createVNode"])(M,{style:{background:"#5259e5",color:"#fff",margin:"0px 10px"},onClick:e.send},{default:r((function(){return[a]})),_:1},8,["onClick"]),[[c["vShow"],"send"===e.type&&"string"===typeof this.id]]),Object(c["withDirectives"])(Object(c["createVNode"])(M,{style:{background:"#5259e5",color:"#fff",margin:"0px 10px"},onClick:t[1]||(t[1]=function(t){return e.handleReceivedDeliveryOrder("adopt")})},{default:r((function(){return[i]})),_:1},512),[[c["vShow"],"receive"===e.type&&"string"===typeof this.id]]),Object(c["withDirectives"])(Object(c["createVNode"])(M,{style:{background:"#5259e5",color:"#fff",margin:"0px 10px"},onClick:t[2]||(t[2]=function(t){return e.rejectReasonVisible=!0})},{default:r((function(){return[s]})),_:1},512),[[c["vShow"],"receive"===e.type&&"string"===typeof this.id]]),Object(c["withDirectives"])(Object(c["createVNode"])(M,{style:{color:"#5259e5",border:"1px solid #5259e5"},onClick:e.saveAsDraft},{default:r((function(){return[d]})),_:1},8,["onClick"]),[[c["vShow"],"string"!==typeof this.id]]),Object(c["createVNode"])("div",l,[Object(c["createVNode"])(M,{style:{"margin-right":"10px"}},{default:r((function(){return[u]})),_:1}),Object(c["createVNode"])(U,{ref:"upload",action:"",multiple:!0,"file-list":e.fileList,"auto-upload":!1,limit:1,customRequest:e.importWordConfirm},{default:r((function(){return[Object(c["createVNode"])(M,{style:{color:"#5259e5",border:"1px solid #5259e5"}},{default:r((function(){return[v]})),_:1})]})),_:1},8,["file-list","customRequest"])])]),Object(c["createVNode"])("div",p,[Object(c["createVNode"])("div",f,[b,y,Object(c["createVNode"])(z,{style:{margin:"20px 0px"}},{default:r((function(){return[Object(c["createVNode"])(q,{span:2,class:"text"},{default:r((function(){return[h]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.code),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.code,"onUpdate:value":t[3]||(t[3]=function(t){return e.delivery.code=t}),placeholder:"请输入送货单号"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[O]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.shipTo),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("div",null,[Object(c["createVNode"])(Y,{"show-search":"",value:e.delivery.customerId,"onUpdate:value":t[4]||(t[4]=function(t){return e.delivery.customerId=t}),placeholder:"请选择收货方",onFocus:e.focus,style:{width:"100%"},"default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":"无匹配项",onSearch:e.handleCustomerSearch,onSelect:e.handleCustomerSelect},{default:r((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.customers,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(W,{key:e.id},{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.name),1)]})),_:2},1024)})),128))]})),_:1},8,["value","onFocus","onSearch","onSelect"])],512),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[j]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.shipper),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{disabled:"",value:e.delivery.shipper,"onUpdate:value":t[5]||(t[5]=function(t){return e.delivery.shipper=t}),placeholder:"请输入送货方名称"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1})]})),_:1}),Object(c["createVNode"])(z,{style:{margin:"20px 0px"}},{default:r((function(){return[Object(c["createVNode"])(q,{span:2,class:"text"},{default:r((function(){return[m]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.dateFormat(e.delivery.orderDate)),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(G,{placeholder:"请选择日期",value:e.delivery.orderDate,"onUpdate:value":t[6]||(t[6]=function(t){return e.delivery.orderDate=t}),style:{width:"100%"}},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[N]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.contacts),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])("div",null,[Object(c["createVNode"])(Y,{"show-search":"",value:e.delivery.contacts,"onUpdate:value":t[7]||(t[7]=function(t){return e.delivery.contacts=t}),placeholder:"请选择收货联系人",onFocus:e.focusDeliCont,style:{width:"100%"},"default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":"无匹配项",onSearch:e.handleSearch,onSelect:e.handleSelect},{default:r((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.customerContacts,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(W,{key:e.id},{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.contacts),1)]})),_:2},1024)})),128))]})),_:1},8,["value","onFocus","onSearch","onSelect"])],512),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[V]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.shipperTel),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.shipperTel,"onUpdate:value":t[8]||(t[8]=function(t){return e.delivery.shipperTel=t}),placeholder:"请输入送货联系人"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1})]})),_:1}),Object(c["createVNode"])(z,{style:{margin:"20px 0px"}},{default:r((function(){return[Object(c["createVNode"])(q,{span:2,class:"text"},{default:r((function(){return[w]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.dateFormat(e.delivery.deliveryDate)),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(G,{placeholder:"请选择日期",value:e.delivery.deliveryDate,"onUpdate:value":t[9]||(t[9]=function(t){return e.delivery.deliveryDate=t}),style:{width:"100%"}},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[g]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.tel),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.tel,"onUpdate:value":t[10]||(t[10]=function(t){return e.delivery.tel=t}),placeholder:"请输入联系方式"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[S]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.route),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.route,"onUpdate:value":t[11]||(t[11]=function(t){return e.delivery.route=t}),placeholder:"请输入路线"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1})]})),_:1}),Object(c["createVNode"])(z,{style:{margin:"20px 0px"}},{default:r((function(){return[Object(c["createVNode"])(q,{span:2,class:"text"},{default:r((function(){return[x]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.totalWeight),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.totalWeight,"onUpdate:value":t[12]||(t[12]=function(t){return e.delivery.totalWeight=t}),placeholder:"请输入总重量"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[D]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.address),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.address,"onUpdate:value":t[13]||(t[13]=function(t){return e.delivery.address=t}),placeholder:"请输入收货地址"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[C]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.shippingType),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{vlaue:e.delivery.shippingType,"onUpdate:vlaue":t[14]||(t[14]=function(t){return e.delivery.shippingType=t}),placeholder:"请输入运输方式"},null,8,["vlaue"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1})]})),_:1}),Object(c["createVNode"])(z,{style:{margin:"20px 0px"}},{default:r((function(){return[Object(c["createVNode"])(q,{span:2,class:"text"},{default:r((function(){return[T]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.totalVol),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.totalVol,"onUpdate:value":t[15]||(t[15]=function(t){return e.delivery.totalVol=t}),placeholder:"请输入总体积"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1}),Object(c["createVNode"])(q,{offset:1,span:2,class:"text"},{default:r((function(){return[_]})),_:1}),Object(c["createVNode"])(q,{span:5,class:"spanText"},{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.delivery.amount),513),[[c["vShow"],"view"===e.sysStatus]]),Object(c["withDirectives"])(Object(c["createVNode"])(A,{value:e.delivery.amount,"onUpdate:value":t[16]||(t[16]=function(t){return e.delivery.amount=t}),placeholder:"请输入送货金额"},null,8,["value"]),[[c["vShow"],"edit"===e.sysStatus]])]})),_:1})]})),_:1})]),Object(c["createVNode"])("div",I,[k,Object(c["createVNode"])(M,{style:{float:"right",color:"#5259e5",border:"1px solid #5259e5"},onClick:e.addDeliveryDtl},{default:r((function(){return[R]})),_:1},8,["onClick"]),E,Object(c["createVNode"])(H,{columns:e.columns,sourceData:e.deliveryMats,editableCols:e.editableCols,onRowDelete:e.rowDeleteHandler,onCancelEdit:e.cancelEditHandler},null,8,["columns","sourceData","editableCols","onRowDelete","onCancelEdit"])])]),Object(c["createVNode"])($,{visible:e.rejectReasonVisible,"onUpdate:visible":t[18]||(t[18]=function(t){return e.rejectReasonVisible=t}),centered:"",closable:!1,"mask-closable":!1,onOk:t[19]||(t[19]=function(t){return e.handleReceivedDeliveryOrder("reject")}),okText:"确定",cancelText:"取消"},{default:r((function(){return[Object(c["createVNode"])(P,{value:e.reason,"onUpdate:value":t[17]||(t[17]=function(t){return e.reason=t}),placeholder:"请输入驳回原因",rows:8},null,8,["value"])]})),_:1},8,["visible"])],64)})),B=(n("7db0"),n("4160"),n("a434"),n("a9e3"),n("159b"),n("368b"),n("56cd")),L=(n("7a59"),n("39ab")),M=(n("02cf"),n("9839")),U=(n("519e"),n("0bb7")),q=(n("a71a"),n("b558")),A=(n("04f3"),n("ed3b")),W=(n("1815"),n("e32c")),Y=(n("50ac"),n("9a63")),z=(n("e1f5"),n("5efb")),G=n("c1df"),H=n.n(G),P=n("a13b"),$=n("74d2"),J=n("9096"),X=n("3f6c"),K=Object(c["defineComponent"])({components:{"a-button":z["a"],"a-row":Y["a"],"a-col":W["a"],"a-modal":A["a"],"a-input":q["a"],"a-date-picker":U["a"],"a-select":M["b"],"a-upload":L["a"],BaseTableEditable:J["a"]},setup:function(){var e=Object(c["ref"])("view"),t=Object(c["reactive"])([{title:"序号",dataIndex:"key",key:"key",slots:{customRender:"key"},width:70},{title:"物料编码",dataIndex:"code",key:"code",slots:{customRender:"code"}},{title:"规格型号",dataIndex:"name",key:"name",slots:{customRender:"name"}},{title:"送货数量",dataIndex:"qty",key:"qty",ellipsis:!0,slots:{customRender:"qty"}},{title:"送货金额",dataIndex:"amount",key:"amount",ellipsis:!0,slots:{customRender:"amount"}},{title:"销售单号",dataIndex:"salesCode",key:"salesCode",ellipsis:!0,slots:{customRender:"salesCode"}},{title:"行体积",dataIndex:"vol",key:"vol",ellipsis:!0,slots:{customRender:"vol"}},{title:"操作",dataIndex:"operation",key:"operation",slots:{customRender:"operation"}}]),n=Object(c["reactive"])({id:"",code:"",shipTo:"",customerId:void 0,shipper:"",orderDate:H()(),contacts:void 0,deliveryDate:H()(),tel:"",route:"",totalWeight:0,address:"",shippingType:"",shipperTel:"",totalVol:0,status:"",amount:0,authorizationCode:"",businessLicense:"",senderBusinessLicense:"",rowVersion:"",deliveryMats:[]}),r=Object(c["reactive"])([]),o=["code","name","qty","amount","salesCode","vol"],a=Object(c["ref"])([]),i=function(){r.push({key:String(r.length+1),id:"",code:"",name:"",qty:0,amount:0,salesCode:"",purCode:"",vol:0,deliveryId:""})},s=function(e){r.forEach((function(t,n,c){t.key===e&&c.splice(n,1)}))},d=function(e){r.forEach((function(t,n,c){t.key===e&&(c[n].code="",c[n].name="",c[n].qty=0,c[n].amount=0,c[n].salesCode="",c[n].vol=0)}))},l=Object(c["ref"])(!1),u=Object(c["ref"])(""),v=function(){A["a"].warning({title:"请确认",content:"确定要发送当前送货单吗？",onOk:function(){Object(P["i"])([n.id]).then((function(e){200===e.code&&B["a"].success({message:"成功",description:"发送成功"})})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))},onCancel:function(){}})};return{sysStatus:e,columns:t,delivery:n,deliveryMats:r,editableCols:o,fileList:a,addDeliveryDtl:i,rowDeleteHandler:s,cancelEditHandler:d,rejectReasonVisible:l,send:v,reason:u}},data:function(){return{id:this.$route.query.id,type:this.$route.query.type,customers:[],customerContacts:[],customerId:""}},created:function(){"string"===typeof this.id&&"string"===typeof this.type?(this.getData(this.id,this.type),this.sysStatus="view"):(this.loadTenant(),this.sysStatus="edit")},methods:{loadTenant:function(){var e=this;Object(X["a"])({id:localStorage.getItem("doway_cloud_tenant_id")}).then((function(t){200===t.code&&(e.delivery.senderBusinessLicense=t.content.creditCode,e.delivery.shipper=t.content.name,e.delivery.shipperTel=t.content.director)})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))},focus:function(){var e=this;Object($["b"])().then((function(t){e.customers=t.content}))},focusDeliCont:function(){var e=this;Object($["c"])({customerId:this.customerId}).then((function(t){e.customerContacts=t.content}))},handleCustomerSelect:function(e){var t=this.customers.find((function(t){return t.id===e}));this.delivery.shipTo=t.name,this.delivery.address=t.address,this.delivery.authorizationCode=t.authorizationCode,this.delivery.businessLicense=t.businessLicense,this.customerId=e},handleCustomerSearch:function(e){var t=this;t.customers=[],Object($["a"])({name:e}).then((function(e){t.customers=e.content})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))},handleSelect:function(e){var t=this.customerContacts.find((function(t){return t.id=e}));this.delivery.contacts=t.contacts,this.delivery.tel=null===t.mobile?t.mobile:t.tel},handleSearch:function(e){var t=this;t.customerContacts=[],Object($["c"])({customerId:this.customerId}).then((function(e){t.customerContacts=e.content})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))},importWordConfirm:function(e){var t=e.file,n=new FormData;n.append("file",t),Object(P["b"])(n).then((function(e){B["a"].success({message:"成功",description:e.msg})})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))},dateFormat:function(e){return H()(e).format("YYYY-MM-DD")},saveAsDraft:function(){var e=this;e.delivery.deliveryMats=e.deliveryMats;var t=[];t.push(e.delivery),Object(P["a"])(t).then((function(t){200===t.code&&(B["a"].success({message:"成功",description:"录入送货单成功"}),e.sysStatus="view")})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))},formatDate:function(e,t){var n=new Date(24*(e-1)*36e5+1);n.setFullYear(n.getFullYear()-70);var c=n.getFullYear()+"",r=n.getMonth()+1+"",o=n.getDate()-1+"";return t&&1===t.length?c+t+r+t+o:c+(Number(r)<10?"0"+r:r)+(Number(o)<10?"0"+o:o)},textFormat:function(e){switch(e){case"saveAsDraft":return"草稿";case"published":return"已发布";case"confirmed":return"已确认";case"rejected":return"已驳回";case"untreated":return"未处理";default:return e}},getData:function(e,t){var n=this;"send"===t?Object(P["d"])({id:e}).then((function(e){n.delivery.id=e.content.id,n.delivery.code=e.content.code,n.delivery.shipTo=e.content.shipTo,n.delivery.customerId=e.content.customerId,n.delivery.shipper=e.content.shipper,n.delivery.shipperTel=e.content.shipperTel,n.delivery.orderDate=e.content.orderDate,n.delivery.contacts=e.content.contacts,n.delivery.deliveryDate=e.content.deliveryDate,n.delivery.tel=e.content.tel,n.delivery.route=e.content.route,n.delivery.totalWeight=e.content.totalWeight,n.delivery.address=e.content.address,n.delivery.shippingType=e.content.shippingType,n.delivery.totalVol=e.content.totalVol,n.delivery.amount=e.content.amount,n.delivery.status=n.textFormat(e.content.status),n.delivery.authorizationCode=e.content.authorizationCode,n.delivery.businessLicense=e.content.businessLicense,n.delivery.senderBusinessLicense=e.content.senderBusinessLicense,n.delivery.rowVersion=e.content.rowVersion,e.content.deliveryMats.forEach((function(e){n.deliveryMats.push({key:String(n.deliveryMats.length+1),id:e.code,code:e.code,name:e.name,qty:e.qty,amount:e.amount,salesCode:e.salesCode,purCode:e.purCode,vol:e.purCode,deliveryId:e.deliveryId})}))})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)})):Object(P["f"])({id:e}).then((function(e){n.delivery.id=e.content.id,n.delivery.code=e.content.code,n.delivery.shipTo=e.content.shipTo,n.delivery.customerId=e.content.customerId,n.delivery.shipper=e.content.shipper,n.delivery.orderDate=e.content.orderDate,n.delivery.contacts=e.content.contacts,n.delivery.deliveryDate=e.content.deliveryDate,n.delivery.tel=e.content.tel,n.delivery.route=e.content.route,n.delivery.totalWeight=e.content.totalWeight,n.delivery.address=e.content.address,n.delivery.shippingType=e.content.shippingType,n.delivery.totalVol=e.content.totalVol,n.delivery.amount=e.content.amount,n.delivery.status=n.textFormat(e.content.status),n.delivery.authorizationCode=e.content.authorizationCode,n.delivery.businessLicense=e.content.businessLicense,n.delivery.senderBusinessLicense=e.content.senderBusinessLicense,n.delivery.rowVersion=e.content.rowVersion,e.content.deliveryMats.forEach((function(e){n.deliveryMats.push({key:String(n.deliveryMats.length+1),id:e.code,code:e.code,name:e.name,qty:e.qty,amount:e.amount,salesCode:e.salesCode,purCode:e.purCode,vol:e.purCode,deliveryId:e.deliveryId})}))})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))},handleReceivedDeliveryOrder:function(e){var t=this,n={ids:[this.delivery.id],result:e,reason:this.reason};Object(P["e"])(n).then((function(e){t.rejectReasonVisible=!1,200===e.code&&B["a"].success({message:"成功",description:"接收成功"})})).catch((function(e){B["a"].error({message:"错误",description:e}),console.debug(e)}))}}});n("e511");K.render=F,K.__scopeId="data-v-c3e83fce";t["default"]=K},"9a63":function(e,t,n){"use strict";var c=n("290c");c["a"].install=function(e){e.component(c["a"].name,c["a"])},t["a"]=c["a"]},a13b:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return v})),n.d(t,"i",(function(){return p}));var c=n("b32d"),r="http://cloud.dowaycn.com/Gateway/EblService/api/v1/delivery";function o(e){return Object(c["a"])({url:r+"/loadById",method:"get",params:e})}function a(e){return Object(c["a"])({url:r+"/loadByIdReceived",method:"get",params:e})}function i(e){return Object(c["a"])({url:r+"/generateStatement",method:"post",data:e})}function s(){return Object(c["a"])({url:r+"/queryAll",method:"get"})}function d(){return Object(c["a"])({url:r+"/searchReceivedDelivery",method:"get"})}function l(e){return Object(c["a"])({url:r+"/adds",method:"post",data:e})}function u(e){return Object(c["a"])({url:r+"/handleReceiveDeliveryOrder",method:"post",data:e})}function v(e){return Object(c["a"])({url:r+"/deliveryImport",method:"post",data:e})}function p(e){return Object(c["a"])({url:r+"/sendDeliveryOrder",method:"post",data:e})}},a9e3:function(e,t,n){"use strict";var c=n("83ab"),r=n("da84"),o=n("94ca"),a=n("6eeb"),i=n("5135"),s=n("c6b6"),d=n("7156"),l=n("c04e"),u=n("d039"),v=n("7c73"),p=n("241c").f,f=n("06cf").f,b=n("9bf2").f,y=n("58a8").trim,h="Number",O=r[h],j=O.prototype,m=s(v(j))==h,N=function(e){var t,n,c,r,o,a,i,s,d=l(e,!1);if("string"==typeof d&&d.length>2)if(d=y(d),t=d.charCodeAt(0),43===t||45===t){if(n=d.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(d.charCodeAt(1)){case 66:case 98:c=2,r=49;break;case 79:case 111:c=8,r=55;break;default:return+d}for(o=d.slice(2),a=o.length,i=0;i<a;i++)if(s=o.charCodeAt(i),s<48||s>r)return NaN;return parseInt(o,c)}return+d};if(o(h,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var V,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(m?u((function(){j.valueOf.call(n)})):s(n)!=h)?d(new O(N(t)),n,w):N(t)},g=c?p(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;g.length>S;S++)i(O,V=g[S])&&!i(w,V)&&b(w,V,f(O,V));w.prototype=j,j.constructor=w,a(r,h,w)}},e32c:function(e,t,n){"use strict";var c=n("da05");c["b"].install=function(e){e.component(c["b"].name,c["b"])},t["a"]=c["b"]},e511:function(e,t,n){"use strict";n("2bbf")}}]);