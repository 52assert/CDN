(window["webpackJsonp_cloud-ebl-app"]=window["webpackJsonp_cloud-ebl-app"]||[]).push([["views-statement-RecordDtlPage-vue"],{"026e":function(e,t,n){"use strict";n("04d7")},"04d7":function(e,t,n){},1815:function(e,t,n){"use strict";n("b550"),n("d79d")},"3f6c":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("b32d"),a="http://cloud.dowaycn.com/Gateway/CenterService/api/v1/tenant";function r(e){return Object(o["a"])({url:a+"/loadById",method:"get",params:e})}},"50ac":function(e,t,n){"use strict";n("b550"),n("d79d")},"5ed4":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return h}));var o=n("b32d"),a="http://cloud.dowaycn.com/Gateway/EblService/api/v1/statement";function r(e){return Object(o["a"])({url:a+"/loadById",method:"get",params:e})}function c(e){return Object(o["a"])({url:a+"/loadByIdReceived",method:"get",params:e})}function s(){return Object(o["a"])({url:a+"/queryAll",method:"get"})}function i(){return Object(o["a"])({url:a+"/queryAllReceived",method:"get"})}function d(e){return Object(o["a"])({url:a+"/generateInvoice",method:"post",data:e})}function u(e){return Object(o["a"])({url:a+"/add",method:"post",data:e})}function l(e){return Object(o["a"])({url:a+"/update",method:"post",data:e})}function f(e){return Object(o["a"])({url:a+"/sendStatement",method:"post",data:e})}function m(e){return Object(o["a"])({url:a+"/handleReceivedStatement",method:"post",data:e})}function b(e){return Object(o["a"])({url:a+"/searchByExp",method:"post",data:e})}function h(e){return Object(o["a"])({url:a+"/searchReceivedByExp",method:"post",data:e})}},"74d2":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s}));var o=n("b32d"),a="http://cloud.dowaycn.com/Gateway/BaseService/api/v1/customer";function r(e){return Object(o["a"])({url:a+"/loadByName",method:"get",params:e})}function c(e){return Object(o["a"])({url:a+"/queryAllContacts",method:"get",params:e})}function s(){return Object(o["a"])({url:a+"/query",method:"get"})}},"7db0":function(e,t,n){"use strict";var o=n("23e7"),a=n("b727").find,r=n("44d2"),c=n("ae40"),s="find",i=!0,d=c(s);s in[]&&Array(1)[s]((function(){i=!1})),o({target:"Array",proto:!0,forced:i||!d},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},8190:function(e,t,n){"use strict";n("90cc")},"90cc":function(e,t,n){},"9a63":function(e,t,n){"use strict";var o=n("290c");o["a"].install=function(e){e.component(o["a"].name,o["a"])},t["a"]=o["a"]},a13b:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"j",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return h}));var o=n("b32d"),a="http://cloud.dowaycn.com/Gateway/EblService/api/v1/delivery";function r(e){return Object(o["a"])({url:a+"/loadById",method:"get",params:e})}function c(e){return Object(o["a"])({url:a+"/loadByIdReceived",method:"get",params:e})}function s(e){return Object(o["a"])({url:a+"/generateStatement",method:"post",data:e})}function i(){return Object(o["a"])({url:a+"/queryAll",method:"get"})}function d(){return Object(o["a"])({url:a+"/searchReceivedDelivery",method:"get"})}function u(e){return Object(o["a"])({url:a+"/adds",method:"post",data:e})}function l(e){return Object(o["a"])({url:a+"/handleReceiveDeliveryOrder",method:"post",data:e})}function f(e){return Object(o["a"])({url:a+"/deliveryImport",method:"post",data:e})}function m(e){return Object(o["a"])({url:a+"/sendDeliveryOrder",method:"post",data:e})}function b(e){return Object(o["a"])({url:a+"/searchByExp",method:"post",data:e})}function h(e){return Object(o["a"])({url:a+"/searchReceivedByExp",method:"post",data:e})}},b0c0:function(e,t,n){var o=n("83ab"),a=n("9bf2").f,r=Function.prototype,c=r.toString,s=/^\s*function ([^ (]*)/,i="name";o&&!(i in r)&&a(r,i,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(e){return""}}})},e32c:function(e,t,n){"use strict";var o=n("da05");o["b"].install=function(e){e.component(o["b"].name,o["b"])},t["a"]=o["b"]},ea45:function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),a=Object(o["withScopeId"])("data-v-49331792");Object(o["pushScopeId"])("data-v-49331792");var r={class:"header"},c=Object(o["createTextVNode"])("发送"),s=Object(o["createTextVNode"])("确认"),i=Object(o["createTextVNode"])("驳回"),d=Object(o["createTextVNode"])("保存"),u=Object(o["createTextVNode"])("编辑"),l=Object(o["createTextVNode"])("放弃"),f={class:"form"},m=Object(o["createTextVNode"])("基本信息"),b=Object(o["createVNode"])("br",null,null,-1),h=Object(o["createVNode"])("br",null,null,-1),p=Object(o["createVNode"])("br",null,null,-1),v=Object(o["createVNode"])("br",null,null,-1),j=Object(o["createVNode"])("br",null,null,-1),g=Object(o["createVNode"])("br",null,null,-1),y={class:"table"},O=Object(o["createTextVNode"])("对账详情"),w=Object(o["createVNode"])("i",{class:"iconfont icon-add1"},null,-1),I=Object(o["createTextVNode"])("添加明细"),V={style:{height:"475px",overflow:"auto"}};Object(o["popScopeId"])();var S=a((function(e,t,n,S,D,N){var k=Object(o["resolveComponent"])("a-button"),T=Object(o["resolveComponent"])("a-row"),x=Object(o["resolveComponent"])("a-input"),C=Object(o["resolveComponent"])("a-form-item"),R=Object(o["resolveComponent"])("a-select-option"),_=Object(o["resolveComponent"])("a-select"),B=Object(o["resolveComponent"])("a-range-picker"),L=Object(o["resolveComponent"])("a-form"),q=Object(o["resolveComponent"])("a-col"),E=Object(o["resolveComponent"])("BaseTableEditable"),F=Object(o["resolveComponent"])("a-table"),P=Object(o["resolveComponent"])("a-modal"),W=Object(o["resolveComponent"])("a-textarea");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",r,[Object(o["withDirectives"])(Object(o["createVNode"])(k,{loading:e.optLoading,style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:e.send},{default:a((function(){return[c]})),_:1},8,["loading","onClick"]),[[o["vShow"],("send"===e.type||void 0!==e.id)&&"草稿"===e.statementInfo.status]]),Object(o["withDirectives"])(Object(o["createVNode"])(k,{loading:e.optLoading,style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:t[1]||(t[1]=function(t){return e.handleReceivedStatement("adopt")})},{default:a((function(){return[s]})),_:1},8,["loading"]),[[o["vShow"],"receive"===e.type&&void 0!==e.id&&"untreated"===e.delivery.status]]),Object(o["withDirectives"])(Object(o["createVNode"])(k,{loading:e.optLoading,style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:t[2]||(t[2]=function(t){return e.rejectReasonVisible=!0})},{default:a((function(){return[i]})),_:1},8,["loading"]),[[o["vShow"],"receive"===e.type&&void 0!==e.id&&"untreated"===e.delivery.status]]),Object(o["withDirectives"])(Object(o["createVNode"])(k,{loading:e.saveLoading,style:{background:"#5259e5",border:"0px",color:"#fff",margin:"0px 10px"},onClick:e.saveHandler},{default:a((function(){return[d]})),_:1},8,["loading","onClick"]),[[o["vShow"],"edit"===e.sysStatus]]),Object(o["withDirectives"])(Object(o["createVNode"])(k,{style:{color:"#5259e5",border:"1px solid #5259e5"},onClick:t[3]||(t[3]=function(t){return e.sysStatus="edit"})},{default:a((function(){return[u]})),_:1},512),[[o["vShow"],"send"===e.type&&"view"===e.sysStatus&&"string"===typeof this.id]]),Object(o["withDirectives"])(Object(o["createVNode"])(k,{style:{color:"#5259e5",border:"1px solid #5259e5"},onClick:e.cancelEdit},{default:a((function(){return[l]})),_:1},8,["onClick"]),[[o["vShow"],"send"===e.type&&"edit"===e.sysStatus]])]),Object(o["createVNode"])("div",f,[Object(o["createVNode"])(T,{class:"title"},{default:a((function(){return[m]})),_:1}),Object(o["createVNode"])(L,{ref:"statementForm",model:e.statementInfo,rules:e.rules,layout:"inline","label-col":{offset:1,span:5},"wrapper-col":{offset:1,span:17}},{default:a((function(){return[b,Object(o["createVNode"])(C,{label:"对账单号",name:"code","has-feedback":"",style:{width:"31%"}},{default:a((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(x,{value:e.statementInfo.code,"onUpdate:value":t[4]||(t[4]=function(t){return e.statementInfo.code=t}),placeholder:"请输入对账单号"},null,8,["value"]),[[o["vShow"],"edit"===e.sysStatus]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"spanText"},Object(o["toDisplayString"])(e.statementInfo.code),513),[[o["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(o["createVNode"])(C,{label:"客户名称",name:"custName","has-feedback":"",style:{width:"31%"}},{default:a((function(){return["edit"===e.sysStatus?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:0,"show-search":"",value:e.statementInfo.customerId,"onUpdate:value":t[5]||(t[5]=function(t){return e.statementInfo.customerId=t}),placeholder:"请选择客户名称",onFocus:e.focusHandler,style:{width:"100%"},"default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":"无匹配项",onSearch:e.handleCustomerSearch,onSelect:e.handleCustomerSelect},{default:a((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.customers,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(R,{key:e.id},{default:a((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)]})),_:2},1024)})),128))]})),_:1},8,["value","onFocus","onSearch","onSelect"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"spanText"},Object(o["toDisplayString"])(e.statementInfo.custName),513),[[o["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(o["createVNode"])(C,{label:"时间范围",name:"dateRange","has-feedback":"",style:{width:"31%"}},{default:a((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(B,{style:{width:"100%"},value:e.dateRange,"onUpdate:value":t[6]||(t[6]=function(t){return e.dateRange=t}),onChange:t[7]||(t[7]=function(t){return e.selectDate()})},null,8,["value"]),[[o["vShow"],"edit"===e.sysStatus]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"spanText"},Object(o["toDisplayString"])(e.dateFormat(e.statementInfo.startTime))+"——"+Object(o["toDisplayString"])(e.dateFormat(e.statementInfo.endTime)),513),[[o["vShow"],"view"===e.sysStatus]])]})),_:1}),h,p,Object(o["createVNode"])(C,{label:"对账方",name:"statementParty","has-feedback":"",style:{width:"31%"}},{default:a((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(x,{value:e.statementInfo.statementParty,"onUpdate:value":t[8]||(t[8]=function(t){return e.statementInfo.statementParty=t}),placeholder:"请输入对账方名称"},null,8,["value"]),[[o["vShow"],"edit"===e.sysStatus]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"spanText"},Object(o["toDisplayString"])(e.statementInfo.statementParty),513),[[o["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(o["createVNode"])(C,{label:"对账金额",name:"amount","has-feedback":"",style:{width:"31%"}},{default:a((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(x,{value:e.statementInfo.amount,"onUpdate:value":t[9]||(t[9]=function(t){return e.statementInfo.amount=t}),placeholder:"请输入对账金额",disabled:""},null,8,["value"]),[[o["vShow"],"edit"===e.sysStatus]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"spanText"},Object(o["toDisplayString"])(e.statementInfo.amount),513),[[o["vShow"],"view"===e.sysStatus]])]})),_:1}),Object(o["createVNode"])(C,{label:"已收金额",name:"received","has-feedback":"",style:{width:"31%"}},{default:a((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(x,{value:e.statementInfo.received,"onUpdate:value":t[10]||(t[10]=function(t){return e.statementInfo.received=t}),placeholder:"请输入已收金额",onChange:e.receivedChange},null,8,["value","onChange"]),[[o["vShow"],"edit"===e.sysStatus]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"spanText"},Object(o["toDisplayString"])(e.statementInfo.received),513),[[o["vShow"],"view"===e.sysStatus]])]})),_:1}),v,j,Object(o["createVNode"])(C,{label:"欠款总额",name:"unreceived","has-feedback":"",style:{width:"31%"}},{default:a((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(x,{value:e.statementInfo.unreceived,"onUpdate:value":t[11]||(t[11]=function(t){return e.statementInfo.unreceived=t}),placeholder:"请输入欠款总额",disabled:""},null,8,["value"]),[[o["vShow"],"edit"===e.sysStatus]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"spanText"},Object(o["toDisplayString"])(e.statementInfo.unreceived),513),[[o["vShow"],"view"===e.sysStatus]])]})),_:1})]})),_:1},8,["model","rules"]),g]),Object(o["createVNode"])("div",y,[Object(o["createVNode"])(T,{class:"title"},{default:a((function(){return[Object(o["createVNode"])(q,{span:12,style:{"font-size":"24px"}},{default:a((function(){return[O]})),_:1}),Object(o["createVNode"])(q,{span:12,style:{"text-align":"right"}},{default:a((function(){return[Object(o["createVNode"])(k,{shape:"round",style:{border:"2px solid #5259e5",color:"#5259e5"},onClick:e.showDelModal},{default:a((function(){return[w,I]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),Object(o["createVNode"])(E,{columns:e.columns,sourceData:e.deliveryInfo,onRowDelete:e.rowDeleteHandler,editableCols:[]},null,8,["columns","sourceData","onRowDelete"])]),Object(o["createVNode"])(P,{visible:e.delShowVisible,"onUpdate:visible":t[12]||(t[12]=function(t){return e.delShowVisible=t}),title:"请选择相应的送货单",centered:"",width:"1080px",closable:!1,"mask-closable":!1,onOk:e.selectDel,okText:"确定",cancelText:"取消"},{default:a((function(){return[Object(o["createVNode"])("div",V,[Object(o["createVNode"])(F,{columns:e.columns,"data-source":e.delDtl,pagination:!1,"row-selection":e.rowSelection},null,8,["columns","data-source","row-selection"])])]})),_:1},8,["visible","onOk"]),Object(o["createVNode"])(P,{visible:e.rejectReasonVisible,"onUpdate:visible":t[14]||(t[14]=function(t){return e.rejectReasonVisible=t}),centered:"",closable:!1,"mask-closable":!1,onOk:t[15]||(t[15]=function(t){return e.handleReceivedStatement("reject")}),okText:"确定",cancelText:"取消"},{default:a((function(){return[Object(o["createVNode"])(W,{value:e.reason,"onUpdate:value":t[13]||(t[13]=function(t){return e.reason=t}),placeholder:"请输入驳回原因",rows:8},null,8,["value"])]})),_:1},8,["visible"])],64)})),D=(n("7db0"),n("4160"),n("a434"),n("d3b7"),n("159b"),n("368b"),n("56cd")),N=(n("04f3"),n("ed3b")),k=(n("1815"),n("e32c")),T=(n("50ac"),n("9a63")),x=(n("e1f5"),n("5efb")),C=n("9096"),R=n("5f70"),_=n.n(R),B=n("5ed4"),L=n("a13b"),q=n("74d2"),E=n("3f6c"),F=Object(o["defineComponent"])({components:{"a-button":x["a"],"a-row":T["a"],"a-col":k["a"],"a-modal":N["a"],BaseTableEditable:C["a"]},setup:function(){var e=Object(o["ref"])("view"),t=Object(o["ref"])(!1),n=Object(o["ref"])(!1),a=Object(o["reactive"])([{title:"序号",dataIndex:"key",key:"key",width:70},{title:"装运单号",dataIndex:"code",key:"code",slots:{customRender:"code"}},{title:"订单日期",dataIndex:"orderDate",key:"orderDate",ellipsis:!0,slots:{customRender:"orderDate"}},{title:"送货日期",dataIndex:"deliveryDate",key:"deliveryDate",ellipsis:!0,slots:{customRender:"deliveryDate"}},{title:"总重量",dataIndex:"totalWeight",key:"totalWeight",ellipsis:!0,slots:{customRender:"totalWeight"}},{title:"总体积",dataIndex:"totalVol",key:"totalVol",ellipsis:!0,slots:{customRender:"totalVol"}},{title:"路线",dataIndex:"route",key:"route",ellipsis:!0,slots:{customRender:"route"}},{title:"运输方式",dataIndex:"shippingType",key:"shippingType",ellipsis:!0,slots:{customRender:"shippingType"}},{title:"客户名称",dataIndex:"shipTo",key:"shipTo",ellipsis:!0,slots:{customRender:"shipTo"}},{title:"联系人",dataIndex:"contacts",key:"contacts",ellipsis:!0,slots:{customRender:"contacts"}},{title:"联系方式",dataIndex:"tel",key:"tel",ellipsis:!0,slots:{customRender:"tel"}},{title:"收货地址",dataIndex:"address",key:"address",ellipsis:!0,slots:{customRender:"address"}},{title:"操作",dataIndex:"operation",key:"operation",slots:{customRender:"operation"}}]),r=Object(o["reactive"])({id:"",code:"",custName:void 0,customerId:void 0,startTime:_()(),endTime:_()(),statementParty:"",amount:0,received:0,unreceived:0,authorizationCode:"",businessLicense:"",senderBusinessLicense:"",status:"draft",rowVersion:"",deliveries:[]}),c=Object(o["reactive"])([]),s=function(e,t,n){return null===t?Promise.reject(e.message):Promise.resolve()},i=Object(o["reactive"])({code:[{required:!0,message:"对账单号不能为空",trigger:"blur"}],custName:[{required:!0,message:"客户名称不能为空",trigger:"blur"}],statementParty:[{required:!0,message:"对账方名称不能为空",trigger:"blur"}],dateRange:[{validator:s,message:"请选择时间范围",trigger:"blur"}],amount:[{required:!0,message:"对账金额不能为空",trigger:"blur"},{pattern:/^0{1}(\.([1-9][0-9]?|[0-9][1-9])){1}$|^[1-9]+(\.\d{1,2})?$/,required:!0,message:"请输入正确的对账金额",trigger:"blur"}],received:[{required:!0,message:"已收金额不能为空",trigger:"blur"},{pattern:/^0{1}(\.([1-9][0-9]?|[0-9][1-9])){1}$|^[1-9]+(\.\d{1,2})?$/,required:!0,message:"请输入正确的已收金额",trigger:"blur"}],unreceived:[{required:!0,message:"欠款总额不能为空",trigger:"blur"}]}),d=Object(o["ref"])(!1),u=Object(o["reactive"])([]),l=function(){d.value=!0,Object(L["g"])().then((function(e){e.content.forEach((function(e){u.push({key:String(u.length+1),id:e.id,code:e.code,orderDate:e.orderDate,deliveryDate:e.deliveryDate,totalWeight:e.totalWeight,totalVol:e.totalVol,route:e.route,shippingType:e.shippingType,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,address:e.address,rowVersion:e.rowVersion,amount:e.amount})}))})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)}))},f=Object(o["reactive"])([]),m=[],b=Object(o["reactive"])({onChange:function(e,t){void 0!==t&&(m=t)}}),h=function(){d.value=!1,f=m,f.forEach((function(e){c.push({key:String(c.length+1),id:e.id,code:e.code,orderDate:e.orderDate,deliveryDate:e.deliveryDate,totalWeight:e.totalWeight,totalVol:e.totalVol,route:e.route,shippingType:e.shippingType,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,address:e.address,rowVersion:e.rowVersion,amount:e.amount}),r.amount+=e.amount}))},p=Object(o["ref"])([r.startTime,r.endTime]),v=Object(o["ref"])(!1),j=Object(o["ref"])(""),g=function(){""===r.businessLicense?D["a"].error({message:"错误",description:"未填写客户信用代码，无法识别当前客户，请完善客户信息，并重新选取客户"}):""===r.authorizationCode?D["a"].error({message:"错误",description:"当前所选客户还不是您的合作伙伴"}):N["a"].confirm({title:"请确认",content:"确定要发送当前送货单吗？",cancelText:"取消",okText:"确认",onOk:function(){n.value=!0,Object(B["j"])([r.id]).then((function(e){200===e.code&&D["a"].success({message:"成功",description:"发送成功"})})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){n.value=!1}))}})},y=function(e){c.forEach((function(t,n,o){t.key===e&&o.splice(n,1)}))};return{sysStatus:e,saveLoading:t,optLoading:n,columns:a,statementInfo:r,deliveryInfo:c,delShowVisible:d,delDtl:u,showDelModal:l,chooseInfo:f,rowSelection:b,selectDel:h,dateRange:p,rejectReasonVisible:v,reason:j,send:g,rowDeleteHandler:y,rules:i}},data:function(){return{type:this.$route.query.type,id:this.$route.query.id,customers:[]}},created:function(){"string"===typeof this.id&&"string"===typeof this.type?(this.getData(this.id,this.type),this.sysStatus="view"):(this.loadTenant(),this.sysStatus="edit")},methods:{getData:function(e,t){var n=this;"send"===t?Object(B["c"])({id:e}).then((function(e){n.statementInfo.id=e.content.id,n.statementInfo.code=e.content.code,n.statementInfo.custName=e.content.custName,n.statementInfo.customerId=e.content.customerId,n.statementInfo.startTime=e.content.startTime,n.statementInfo.endTime=e.content.endTime,n.statementInfo.statementParty=e.content.statementParty,n.statementInfo.amount=e.content.amount,n.statementInfo.received=e.content.received,n.statementInfo.unreceived=e.content.unreceived,n.statementInfo.authorizationCode=e.content.authorizationCode,n.statementInfo.businessLicense=e.content.businessLicense,n.statementInfo.senderBusinessLicense=e.content.senderBusinessLicense,n.statementInfo.status=n.textFormat(e.content.status),n.statementInfo.rowVersion=e.content.rowVersion,e.content.deliveries.forEach((function(e){n.deliveryInfo.push({key:String(n.statementInfo.deliveries.length+1),id:e.id,code:e.code,orderDate:e.orderDate,deliveryDate:e.deliveryDate,totalWeight:e.totalWeight,totalVol:e.totalVol,route:e.route,shippingType:e.shippingType,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,address:e.address,rowVersion:e.rowVersion,amount:e.amount})}))})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)})):Object(B["e"])({id:e}).then((function(e){n.statementInfo.id=e.content.id,n.statementInfo.code=e.content.code,n.statementInfo.custName=e.content.custName,n.statementInfo.customerId=e.content.customerId,n.statementInfo.startTime=e.content.startTime,n.statementInfo.endTime=e.content.endTime,n.statementInfo.statementParty=e.content.statementParty,n.statementInfo.amount=e.content.amount,n.statementInfo.received=e.content.received,n.statementInfo.unreceived=e.content.unreceived,n.statementInfo.authorizationCode=e.content.authorizationCode,n.statementInfo.businessLicense=e.content.businessLicense,n.statementInfo.senderBusinessLicense=e.content.senderBusinessLicense,n.statementInfo.status=n.textFormat(e.content.status),n.statementInfo.rowVersion=e.content.rowVersion,e.content.deliveryReceiveds.forEach((function(e){n.deliveryInfo.push({key:String(n.deliveryInfo.length+1),id:e.id,code:e.code,orderDate:e.orderDate,deliveryDate:e.deliveryDate,totalWeight:e.totalWeight,totalVol:e.totalVol,route:e.route,shippingType:e.shippingType,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,address:e.address,rowVersion:e.rowVersion,amount:e.amount})}))})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)}))},receivedChange:function(){this.statementInfo.unreceived=this.statementInfo.amount-this.statementInfo.received},loadTenant:function(){var e=this;Object(E["a"])({id:localStorage.getItem("doway_cloud_tenant_id")}).then((function(t){200===t.code&&(e.statementInfo.senderBusinessLicense=t.content.creditCode)})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)}))},focusHandler:function(){var e=this;Object(q["b"])().then((function(t){e.customers=t.content}))},handleCustomerSelect:function(e){var t=this.customers.find((function(t){return t.id===e}));this.statementInfo.custName=t.name,this.statementInfo.authorizationCode=t.authorizationCode,this.statementInfo.businessLicense=t.businessLicense},handleCustomerSearch:function(e){var t=this;t.customers=[],Object(q["a"])({name:e}).then((function(e){t.customers=e.content})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)}))},cancelEdit:function(){"string"===typeof this.id?this.sysStatus="view":this.$router.push({path:"/statementRecord"})},saveHandler:function(){var e=this;e.statementInfo.deliveries=e.deliveryInfo;var t=e.$refs.statementForm;t.validate().then((function(){e.saveLoading=!0,void 0!==e.id?Object(B["k"])(e.statementInfo).then((function(t){e.sysStatus="view","200"===t.code&&D["a"].success({message:"成功",description:"保存成功"})})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){e.saveLoading=!1})):Object(B["a"])(e.statementInfo).then((function(t){e.sysStatus="view","200"===t.code&&(e.id=t.content,D["a"].success({message:"成功",description:"保存成功"}))})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){e.saveLoading=!1}))})).catch((function(e){console.debug(e)}))},handleReceivedStatement:function(e){var t=this,n={ids:[t.statementInfo.id],result:e,reason:t.reason};t.optLoading=!0,Object(B["d"])(n).then((function(e){t.getData(String(t.id),String(t.type)),t.rejectReasonVisible=!1,200===e.code&&D["a"].success({message:"成功",description:"接收成功"})})).catch((function(e){D["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){t.optLoading=!1}))},textFormat:function(e){switch(e){case"draft":return"草稿";case"published":return"已发布";case"confirmed":return"已确认";case"rejected":return"已驳回";case"untreated":return"未处理";default:return e}},dateFormat:function(e){return _()(e).format("YYYY-MM-DD")},selectDate:function(){this.statementInfo.startTime=this.dateRange[0],this.statementInfo.endTime=this.dateRange[1]}}});n("8190"),n("026e");F.render=S,F.__scopeId="data-v-49331792";t["default"]=F}}]);