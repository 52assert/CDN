(window["webpackJsonp_cloud-ebl-app"]=window["webpackJsonp_cloud-ebl-app"]||[]).push([["views-delivery-RecordPage-vue"],{"03ca":function(e,t,n){},1467:function(e,t,n){},1815:function(e,t,n){"use strict";n("b550"),n("d79d")},"1dde":function(e,t,n){var c=n("d039"),r=n("b622"),o=n("2d00"),a=r("species");e.exports=function(e){return o>=51||!c((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"48ba":function(e,t,n){},"4de4":function(e,t,n){"use strict";var c=n("23e7"),r=n("b727").filter,o=n("1dde"),a=n("ae40"),i=o("filter"),s=a("filter");c({target:"Array",proto:!0,forced:!i||!s},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"50ac":function(e,t,n){"use strict";n("b550"),n("d79d")},"5ed4":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"m",(function(){return f})),n.d(t,"l",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return y})),n.d(t,"b",(function(){return O}));var c=n("b32d"),r="http://cloud.dowaysoft.com/Gateway/EblService/api/v1/statement";function o(e){return Object(c["a"])({url:r+"/loadById",method:"get",params:e})}function a(e){return Object(c["a"])({url:r+"/loadByIdReceived",method:"get",params:e})}function i(){return Object(c["a"])({url:r+"/queryAll",method:"get"})}function s(e){return Object(c["a"])({url:r+"/queryAllByCustId",method:"get",params:e})}function u(){return Object(c["a"])({url:r+"/queryAllReceived",method:"get"})}function d(e){return Object(c["a"])({url:r+"/generateInvoice",method:"post",data:e})}function l(e){return Object(c["a"])({url:r+"/add",method:"post",data:e})}function f(e){return Object(c["a"])({url:r+"/update",method:"post",data:e})}function b(e){return Object(c["a"])({url:r+"/sendStatement",method:"post",data:e})}function p(e){return Object(c["a"])({url:r+"/handleReceivedStatement",method:"post",data:e})}function h(e){return Object(c["a"])({url:r+"/searchByExp",method:"post",data:e})}function y(e){return Object(c["a"])({url:r+"/searchReceivedByExp",method:"post",data:e})}function O(){return Object(c["a"])({url:r+"/autoCreateStatement",method:"get"})}},8418:function(e,t,n){"use strict";var c=n("c04e"),r=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var a=c(t);a in e?r.f(e,a,o(0,n)):e[a]=n}},9096:function(e,t,n){"use strict";var c=n("7a23"),r=Object(c["withScopeId"])("data-v-6e02970b");Object(c["pushScopeId"])("data-v-6e02970b");var o={key:0},a={key:1,class:"editable_row_operation"},i={key:0},s={key:1},u=Object(c["createVNode"])("a",null,"删除",-1),d={key:2},l=Object(c["createVNode"])("span",null,"只读状态",-1);Object(c["popScopeId"])();var f=r((function(e,t,n,f,b,p){var h=Object(c["resolveComponent"])("a-input"),y=Object(c["resolveComponent"])("a-popconfirm"),O=Object(c["resolveComponent"])("a-table");return Object(c["openBlock"])(),Object(c["createBlock"])(O,{columns:e.columns,"data-source":e.sourceData,bordered:"","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},Object(c["createSlots"])({operation:r((function(t){var n=t.record;return[""!==e.destPath?(Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("a",{onClick:function(t){return e.goDtl(n.id)}},"查看详情",8,["onClick"])])):Object(c["createCommentVNode"])("",!0),""===e.destPath&&e.editableCols.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[n.editable?(Object(c["openBlock"])(),Object(c["createBlock"])("span",i,[Object(c["createVNode"])("a",{onClick:function(t){return e.save(n.key)}},"保存",8,["onClick"]),Object(c["createVNode"])("a",{onClick:function(t){return e.cancel(n.key)}},"放弃",8,["onClick"])])):(Object(c["openBlock"])(),Object(c["createBlock"])("span",s,[Object(c["createVNode"])("a",Object(c["mergeProps"])(""!==e.editingKey?{disabled:"disabled"}:{},{onClick:function(t){return e.edit(n.key)}})," 编辑 ",16,["onClick"]),Object(c["createVNode"])(y,Object(c["mergeProps"])(""!==e.editingKey?{disabled:"disabled"}:{},{title:"确定要删除吗？",onConfirm:function(t){return e.onDelete(n.key)}}),{default:r((function(){return[u]})),_:1},16,["onConfirm"])]))])):Object(c["createCommentVNode"])("",!0),""===e.destPath&&0===e.editableCols.length?(Object(c["openBlock"])(),Object(c["createBlock"])("div",d,[l])):Object(c["createCommentVNode"])("",!0)]})),_:2},[Object(c["renderList"])(e.editableCols,(function(t){return{name:t,fn:r((function(n){var r=n.text,o=n.record;return[Object(c["createVNode"])("div",null,[o.editable?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:0,style:{width:"100%"},value:r,onChange:function(n){return e.handleChange(n.target.value,o.key,t)}},null,8,["value","onChange"])):(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:1},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(r),1)],64))])]}))}}))]),1032,["columns","data-source","row-selection"])})),b=(n("4de4"),n("a71a"),n("b558")),p=(n("b550"),n("03ca"),n("e1f5"),n("0464")),h=n("f933"),y=n("f54f"),O=n("4d91"),j=n("daa3"),m=n("b488"),v=n("b92b"),g=n("2db5"),C=n.n(g),x=n("5efb"),k=n("e5cd"),V=n("02ea"),w=n("4df5");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=Object(y["a"])(),K=Object(v["a"])(),B={name:"APopconfirm",props:N(N({},S),{},{prefixCls:O["a"].string,transitionName:O["a"].string.def("zoom-big"),content:O["a"].any,title:O["a"].any,trigger:S.trigger.def("click"),okType:K.type.def("primary"),disabled:O["a"].bool.def(!1),okText:O["a"].any,cancelText:O["a"].any,icon:O["a"].any,okButtonProps:O["a"].object,cancelButtonProps:O["a"].object,onConfirm:O["a"].func,onCancel:O["a"].func,onVisibleChange:O["a"].func,"onUpdate:visible":O["a"].func}),mixins:[m["a"]],watch:{visible:function(e){this.sVisible=e}},setup:function(){return{configProvider:Object(c["inject"])("configProvider",w["a"])}},data:function(){var e=Object(j["h"])(this),t={sVisible:!1};return"visible"in e&&(t.sVisible=e.visible),"defaultVisible"in e&&(t.sVisible=e.defaultVisible),t},methods:{onConfirmHandle:function(e){this.setVisible(!1,e),this.$emit("confirm",e)},onCancelHandle:function(e){this.setVisible(!1,e),this.$emit("cancel",e)},onVisibleChangeHandle:function(e){var t=this.$props.disabled;t||this.setVisible(e)},setVisible:function(e,t){Object(j["m"])(this,"visible")||this.setState({sVisible:e}),this.$emit("update:visible",e),this.$emit("visibleChange",e,t)},getPopupDomNode:function(){return this.$refs.tooltip.getPopupDomNode()},renderOverlay:function(e,t){var n=this,r=this.okType,o=this.okButtonProps,a=this.cancelButtonProps,i=Object(j["e"])(this,"icon")||Object(c["createVNode"])(C.a,null,null),s=Object(j["p"])(N({size:"small",onClick:this.onCancelHandle},a)),u=Object(j["p"])(N({type:r,size:"small",onClick:this.onConfirmHandle},o));return Object(c["createVNode"])("div",{class:"".concat(e,"-inner-content")},[Object(c["createVNode"])("div",{class:"".concat(e,"-message")},[i,Object(c["createVNode"])("div",{class:"".concat(e,"-message-title")},[Object(j["e"])(this,"title")])]),Object(c["createVNode"])("div",{class:"".concat(e,"-buttons")},[Object(c["createVNode"])(x["a"],s,{default:function(){return[Object(j["e"])(n,"cancelText")||t.cancelText]}}),Object(c["createVNode"])(x["a"],u,{default:function(){return[Object(j["e"])(n,"okText")||t.okText]}})])])}},render:function(){var e,t=this,n=Object(j["h"])(this),r=n.prefixCls,o=this.configProvider.getPrefixCls,a=o("popover",r),i=Object(p["a"])(n,["title","content","cancelText","okText","onUpdate:visible"]),s=Object(c["createVNode"])(k["a"],{componentName:"Popconfirm",defaultLocale:V["a"].Popconfirm,children:function(e){return t.renderOverlay(a,e)}},null),u=N(N({},i),{},{title:s,prefixCls:a,visible:this.sVisible,ref:"tooltip",onVisibleChange:this.onVisibleChangeHandle});return Object(c["createVNode"])(h["a"],u,{default:function(){return[null===(e=t.$slots)||void 0===e?void 0:e.default()]}})},install:function(e){e.component(B.name,B)}},R=B,E=Object(c["defineComponent"])({props:{columns:{type:Array,default:function(){return[]}},sourceData:{type:Array,default:function(){return[]}},editableCols:{type:Array,default:function(){return[]}},destPath:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},selectedKeys:{type:String,default:function(){return""}}},components:{"a-popconfirm":R,"a-input":b["a"]},data:function(){return{editingKey:"",selectedRowKeys:[]}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{goDtl:function(e){this.$router.push({path:this.destPath,query:{id:e,type:this.type}})},onSelectChange:function(e,t){this.$emit("selected",t),this.selectedRowKeys=this.selectedKeys},edit:function(e){this.editingKey=e;var t=this.sourceData.filter((function(t){return e===t.key}))[0];t&&(t.editable=!0),this.$emit("rowEdit",t)},save:function(e){this.editingKey="";var t=this.sourceData.filter((function(t){return e===t.key}))[0];t&&delete t.editable},cancel:function(e){this.editingKey&&(this.editingKey=""),this.$emit("cancelEdit",e);var t=this.sourceData.filter((function(t){return e===t.key}))[0];t&&delete t.editable},handleChange:function(e,t,n){var c=this.sourceData.filter((function(e){return t===e.key}))[0];c&&(c[n]=e),this.$emit("rowChange",c)},onDelete:function(e){this.editingKey&&(this.editingKey=""),this.$emit("rowDelete",e)}}});n("9f2a");E.render=f,E.__scopeId="data-v-6e02970b";t["a"]=E},"9a63":function(e,t,n){"use strict";var c=n("290c");c["a"].install=function(e){e.component(c["a"].name,c["a"])},t["a"]=c["a"]},"9f2a":function(e,t,n){"use strict";n("1467")},a13b:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"l",(function(){return y}));var c=n("b32d"),r="http://cloud.dowaysoft.com/Gateway/EblService/api/v1/delivery";function o(e){return Object(c["a"])({url:r+"/loadById",method:"get",params:e})}function a(e){return Object(c["a"])({url:r+"/loadByIdReceived",method:"get",params:e})}function i(e){return Object(c["a"])({url:r+"/generateStatement",method:"post",data:e})}function s(){return Object(c["a"])({url:r+"/queryAll",method:"get"})}function u(){return Object(c["a"])({url:r+"/searchReceivedDelivery",method:"get"})}function d(e){return Object(c["a"])({url:r+"/adds",method:"post",data:e})}function l(e){return Object(c["a"])({url:r+"/handleReceiveDeliveryOrder",method:"post",data:e})}function f(e){return Object(c["a"])({url:r+"/deliveryImport",method:"post",data:e})}function b(e){return Object(c["a"])({url:r+"/sendDeliveryOrder",method:"post",data:e})}function p(e){return Object(c["a"])({url:r+"/searchByExp",method:"post",data:e})}function h(e){return Object(c["a"])({url:r+"/searchReceivedByExp",method:"post",data:e})}function y(e){return Object(c["a"])({url:r+"/update",method:"post",data:e})}},a434:function(e,t,n){"use strict";var c=n("23e7"),r=n("23cb"),o=n("a691"),a=n("50c4"),i=n("7b0b"),s=n("65f0"),u=n("8418"),d=n("1dde"),l=n("ae40"),f=d("splice"),b=l("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,y=9007199254740991,O="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!f||!b},{splice:function(e,t){var n,c,d,l,f,b,j=i(this),m=a(j.length),v=r(e,m),g=arguments.length;if(0===g?n=c=0:1===g?(n=0,c=m-v):(n=g-2,c=h(p(o(t),0),m-v)),m+n-c>y)throw TypeError(O);for(d=s(j,c),l=0;l<c;l++)f=v+l,f in j&&u(d,l,j[f]);if(d.length=c,n<c){for(l=v;l<m-c;l++)f=l+c,b=l+n,f in j?j[b]=j[f]:delete j[b];for(l=m;l>m-c+n;l--)delete j[l-1]}else if(n>c)for(l=m-c;l>v;l--)f=l+c-1,b=l+n-1,f in j?j[b]=j[f]:delete j[b];for(l=0;l<n;l++)j[l+v]=arguments[l+2];return j.length=m-c+n,d}})},e32c:function(e,t,n){"use strict";var c=n("da05");c["b"].install=function(e){e.component(c["b"].name,c["b"])},t["a"]=c["b"]},e3f9:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r=Object(c["createTextVNode"])(" 发送 "),o=Object(c["createTextVNode"])(" 自动生成对账单 "),a=Object(c["createTextVNode"])(" 送货单号 "),i=Object(c["createTextVNode"])(" 客户名称 "),s=Object(c["createTextVNode"])(" 确认 "),u=Object(c["createTextVNode"])(" 驳回 "),d=Object(c["createTextVNode"])(" 送货单号 "),l=Object(c["createTextVNode"])(" 客户名称 "),f=Object(c["createTextVNode"])(" Custom ");function b(e,t,n,b,p,h){var y=Object(c["resolveComponent"])("a-button"),O=Object(c["resolveComponent"])("a-col"),j=Object(c["resolveComponent"])("a-select-option"),m=Object(c["resolveComponent"])("a-select"),v=Object(c["resolveComponent"])("a-input-search"),g=Object(c["resolveComponent"])("a-input-group"),C=Object(c["resolveComponent"])("a-row"),x=Object(c["resolveComponent"])("BaseTableEditable"),k=Object(c["resolveComponent"])("a-spin"),V=Object(c["resolveComponent"])("a-tab-pane"),w=Object(c["resolveComponent"])("a-tabs"),D=Object(c["resolveComponent"])("a-textarea"),N=Object(c["resolveComponent"])("a-modal");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(w,{activeKey:e.currentKey,"onUpdate:activeKey":t[7]||(t[7]=function(t){return e.currentKey=t})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(V,{key:"send",tab:"我发送的"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C,{class:"header"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{span:10},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(y,{disabled:0===e.ids.length,loading:e.optLoading,type:"primary",style:{margin:"0px 10px 10px 10px"},onClick:e.send},{default:Object(c["withCtx"])((function(){return[r]})),_:1},8,["disabled","loading","onClick"]),Object(c["createVNode"])(y,{loading:e.generateLoading,type:"primary",onClick:e.autoCreateStatement,style:{margin:"0px 10px 10px 10px"}},{default:Object(c["withCtx"])((function(){return[o]})),_:1},8,["loading","onClick"])]})),_:1}),Object(c["createVNode"])(O,{span:14},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(g,{compact:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{value:e.searchType,"onUpdate:value":t[1]||(t[1]=function(t){return e.searchType=t}),placeholder:"选择搜索条件",style:{width:"110px"},onChange:e.handleSelectChange},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{value:"code"},{default:Object(c["withCtx"])((function(){return[a]})),_:1}),Object(c["createVNode"])(j,{value:"cuatName"},{default:Object(c["withCtx"])((function(){return[i]})),_:1})]})),_:1},8,["value","onChange"]),Object(c["createVNode"])(v,{value:e.searchExp,"onUpdate:value":t[2]||(t[2]=function(t){return e.searchExp=t}),style:{width:"80%"},placeholder:"请输入搜索内容","enter-button":"",onSearch:e.onSearch},null,8,["value","onSearch"])]})),_:1})]})),_:1})]})),_:1}),Object(c["createVNode"])(k,{spinning:e.listLoading},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(x,{columns:e.columns,sourceData:e.souceData,selectedKeys:e.selectedKeys,destPath:"/deliveryRecordDtl",type:"send",onSelected:e.setIds},null,8,["columns","sourceData","selectedKeys","onSelected"])]})),_:1},8,["spinning"])]})),_:1}),Object(c["createVNode"])(V,{key:"receive",tab:"我接收的"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C,{class:"header"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{span:10},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(y,{disabled:0===e.ids.length,loading:e.optLoading,type:"primary",style:{margin:"0px 10px 10px 10px"},onClick:t[3]||(t[3]=function(t){return e.handleReceivedDeliveryOrder("adopt")})},{default:Object(c["withCtx"])((function(){return[s]})),_:1},8,["disabled","loading"]),Object(c["createVNode"])(y,{disabled:0===e.ids.length,loading:e.optLoading,type:"primary",style:{margin:"0px 10px 10px 10px"},onClick:t[4]||(t[4]=function(t){return e.rejectReasonModal=!0})},{default:Object(c["withCtx"])((function(){return[u]})),_:1},8,["disabled","loading"])]})),_:1}),Object(c["createVNode"])(O,{span:14},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(g,{compact:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{value:e.searchType,"onUpdate:value":t[5]||(t[5]=function(t){return e.searchType=t}),placeholder:"选择搜索条件",style:{width:"110px"},onChange:e.handleSelectChange},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{value:"code"},{default:Object(c["withCtx"])((function(){return[d]})),_:1}),Object(c["createVNode"])(j,{value:"custName"},{default:Object(c["withCtx"])((function(){return[l]})),_:1})]})),_:1},8,["value","onChange"]),Object(c["createVNode"])(v,{value:e.searchExp,"onUpdate:value":t[6]||(t[6]=function(t){return e.searchExp=t}),style:{width:"80%"},placeholder:"请输入搜索内容","enter-button":"",onSearch:e.onSearch},{enterButton:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(y,{style:{background:"#5259e5",border:"0px"}},{default:Object(c["withCtx"])((function(){return[f]})),_:1})]})),_:1},8,["value","onSearch"])]})),_:1})]})),_:1})]})),_:1}),Object(c["createVNode"])(k,{spinning:e.listLoading},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(x,{columns:e.columns,sourceData:e.souceReceivedData,selectedKeys:e.selectedKeys,destPath:"/deliveryRecordDtl",type:"receive",onSelected:e.setIds},null,8,["columns","sourceData","selectedKeys","onSelected"])]})),_:1},8,["spinning"])]})),_:1})]})),_:1},8,["activeKey"]),Object(c["createVNode"])(N,{visible:e.rejectReasonModal,"onUpdate:visible":t[9]||(t[9]=function(t){return e.rejectReasonModal=t}),centered:"",closable:!1,"mask-closable":!1,onOk:t[10]||(t[10]=function(t){return e.handleReceivedDeliveryOrder("reject")}),okText:"确定",cancelText:"取消"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(D,{value:e.reason,"onUpdate:value":t[8]||(t[8]=function(t){return e.reason=t}),placeholder:"请输入驳回原因",rows:8},null,8,["value"])]})),_:1},8,["visible"])],64)}n("4160"),n("a434"),n("d3b7"),n("159b"),n("368b");var p=n("56cd"),h=(n("04f3"),n("ed3b")),y=(n("1815"),n("e32c")),O=(n("50ac"),n("9a63")),j=(n("e1f5"),n("5efb")),m=n("9096"),v=n("a13b"),g=n("5ed4"),C=n("5f70"),x=n.n(C),k=Object(c["defineComponent"])({components:{BaseTableEditable:m["a"],"a-button":j["a"],"a-row":O["a"],"a-col":y["a"],"a-modal":h["a"]},setup:function(){var e=Object(c["ref"])(!1),t=Object(c["ref"])(!1),n=Object(c["ref"])(!1),r=Object(c["reactive"])([]),o=Object(c["reactive"])([{title:"序号",dataIndex:"key",key:"key",width:70},{title:"送货单号",dataIndex:"code",key:"code"},{title:"收货方名称",dataIndex:"shipTo",key:"shipTo",ellipsis:!0},{title:"收货方联系人",dataIndex:"contacts",key:"contacts",ellipsis:!0},{title:"联系方式",dataIndex:"tel",key:"tel",ellipsis:!0},{title:"送货金额",dataIndex:"amount",key:"amount",ellipsis:!0},{title:"送货日期",dataIndex:"deliveryDate",key:"deliveryDate",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0},{title:"确认时间",dataIndex:"confirmTime",key:"confirmTime",ellipsis:!0},{title:"操作",dataIndex:"operation",key:"operation",slots:{customRender:"operation"}}]),a=Object(c["reactive"])([]),i=Object(c["reactive"])([]),s=Object(c["ref"])(!1),u=Object(c["ref"])(""),d=Object(c["ref"])("send"),l=Object(c["ref"])("code"),f=Object(c["ref"])(""),b=Object(c["ref"])(""),h=Object(c["reactive"])([]),y=function(e){switch(e){case"draft":return"草稿";case"published":return"已发送";case"confirmed":return"已确认";case"rejected":return"已驳回";case"untreated":return"未处理";default:return e}},O=function(){n.value=!0,Object(v["g"])().then((function(e){a.splice(0),e.content.forEach((function(e){a.push({key:String(a.length+1),id:e.id,code:e.code,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,amount:e.amount,orderDate:x()(e.orderDate).format("YYYY-MM-DD"),deliveryDate:x()(e.deliveryDate).format("YYYY-MM-DD"),status:y(e.status),rowVersion:e.rowVersion,authorizationCode:e.authorizationCode})}))})).catch((function(e){p["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){n.value=!1}))},j=function(){n.value=!0,Object(v["j"])().then((function(e){i.splice(0),e.content.forEach((function(e){i.push({key:String(i.length+1),id:e.id,code:e.code,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,amount:e.amount,orderDate:x()(e.orderDate).format("YYYY-MM-DD"),deliveryDate:x()(e.deliveryDate).format("YYYY-MM-DD"),status:y(e.status),rowVersion:e.rowVersion,authorizationCode:e.authorizationCode})}))})).catch((function(e){p["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){n.value=!1}))},m=function(e,t){Object(v["h"])({expCondition:e,expContent:t}).then((function(e){a.splice(0),e.content.forEach((function(e){a.push({key:String(a.length+1),id:e.id,code:e.code,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,amount:e.amount,orderDate:x()(e.orderDate).format("YYYY-MM-DD"),deliveryDate:x()(e.deliveryDate).format("YYYY-MM-DD"),status:y(e.status),rowVersion:e.rowVersion,authorizationCode:e.authorizationCode})}))})).catch((function(e){p["a"].error({message:"错误",description:e}),console.debug(e)}))},g=function(e,t){Object(v["i"])({expCondition:e,expContent:t}).then((function(e){a.splice(0),e.content.forEach((function(e){i.push({key:String(i.length+1),id:e.id,code:e.code,shipTo:e.shipTo,contacts:e.contacts,tel:e.tel,amount:e.amount,orderDate:x()(e.orderDate).format("YYYY-MM-DD"),deliveryDate:x()(e.deliveryDate).format("YYYY-MM-DD"),status:y(e.status),rowVersion:e.rowVersion,authorizationCode:e.authorizationCode})}))})).catch((function(e){p["a"].error({message:"错误",description:e}),console.debug(e)}))};return{optLoading:e,generateLoading:t,listLoading:n,selectedKeys:r,columns:o,souceData:a,souceReceivedData:i,rejectReasonModal:s,reason:u,textFormat:y,queryAllDelivery:O,queryAllReceivedDelivery:j,currentKey:d,ids:h,searchExp:b,searchType:l,searchReceivedType:f,searchDeliveryByExp:m,searchDeliveryReceivedByExp:g}},watch:{currentKey:{handler:function(e){switch(e){case"send":this.searchType="code",this.searchExp="",this.ids.splice(0),this.queryAllDelivery();break;case"receive":this.searchReceivedType="custName",this.searchExp="",this.ids.splice(0),this.queryAllReceivedDelivery();break;default:break}},immediate:!0}},methods:{autoCreateStatement:function(){Object(g["b"])().then((function(e){p["a"].success({message:"成功",description:"自动生成对账单成功"})})).catch((function(e){p["a"].error({message:"失败",description:e})}))},handleSelectChange:function(e,t){this.searchType=e},setIds:function(e){var t=this;t.ids.splice(0),t.selectedKeys.splice(0),null!==e&&e.forEach((function(e){switch(t.currentKey){case"send":"草稿"!==e.status?p["a"].warning({message:"警告",description:"采购订单号"+e.code+e.status+",不能重复勾选"}):(t.ids.push(e.id),t.selectedKeys.push(e.key));break;case"receive":"未处理"!==e.status?p["a"].warning({message:"警告",description:"采购订单号"+e.code+e.status+",不能重复勾选"}):(t.ids.push(e.id),t.selectedKeys.push(e.key));break;default:break}}))},generateStatement:function(){var e=this;e.generateLoading=!0,Object(v["c"])(e.ids).then((function(e){200===e.code&&p["a"].success({message:"成功",description:"已成功生成对账单"})})).catch((function(e){p["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){e.generateLoading=!1}))},send:function(){var e=this;h["a"].confirm({title:"请确认",content:"确定要发送当前送货单吗?",cancelText:"取消",okText:"确认",onOk:function(){e.optLoading=!0,Object(v["k"])(e.ids).then((function(t){"send"===e.currentKey?(e.searchType="code",e.searchExp="",e.ids.splice(0),e.selectedKeys.splice(0),e.queryAllDelivery()):"receive"===e.currentKey&&(e.searchReceivedType="custName",e.searchExp="",e.ids.splice(0),e.selectedKeys.splice(0),e.queryAllReceivedDelivery()),200===t.code&&p["a"].success({message:"成功",description:"发送成功"})})).catch((function(e){p["a"].error({message:"错误",description:e}),console.debug(e)})).finally((function(){e.optLoading=!1}))}})},onSearch:function(e){switch(this.currentKey){case"send":this.searchDeliveryByExp(this.searchType,this.searchExp);break;case"receive":this.searchDeliveryReceivedByExp(this.searchType,this.searchExp);break;default:break}},handleReceivedDeliveryOrder:function(e){var t=this,n={ids:t.ids,result:e,reason:t.reason};Object(v["e"])(n).then((function(e){"send"===t.currentKey?(t.searchType="code",t.searchExp="",t.ids.splice(0),t.selectedKeys.splice(0),t.queryAllDelivery()):"receive"===t.currentKey&&(t.searchReceivedType="custName",t.searchExp="",t.ids.splice(0),t.selectedKeys.splice(0),t.queryAllReceivedDelivery()),t.rejectReasonModal=!1,200===e.code&&p["a"].success({message:"成功",description:"已处理"})})).catch((function(e){p["a"].error({message:"错误",description:e}),console.debug(e)}))}}});n("ee6a");k.render=b;t["default"]=k},ee6a:function(e,t,n){"use strict";n("48ba")}}]);